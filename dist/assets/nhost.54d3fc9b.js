(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function Qt(t){this.message=t}Qt.prototype=new Error,Qt.prototype.name="InvalidCharacterError";var kr=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Qt("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,s=0,o="";n=e.charAt(s++);~n&&(r=i%4?64*r+n:n,i++%4)?o+=String.fromCharCode(255&r>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function bi(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(kr(r).replace(/(.)/g,function(n,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(e)}catch{return kr(e)}}function mt(t){this.message=t}function Oi(t,e){if(typeof t!="string")throw new mt("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(bi(t.split(".")[r]))}catch(n){throw new mt("Invalid token specified: "+n.message)}}mt.prototype=new Error,mt.prototype.name="InvalidTokenError";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var E=function(){return E=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},E.apply(this,arguments)};function pr(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function R(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function L(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}var U;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(U||(U={}));var ce;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(ce||(ce={}));var Kt=U.Start,vr=U.Stop,Ie=U.Raise,Re=U.Send,xn=U.Cancel,Ai=U.NullEvent,mr=U.Assign;U.After;U.DoneState;var In=U.Log,_i=U.Init,Zt=U.Invoke;U.ErrorExecution;var Cr=U.ErrorPlatform,xi=U.ErrorCustom,Rn=U.Update,Ii=U.Choose,Ri=U.Pure,Nn=".",Ur={},er="xstate.guard",Ni="",Ge=!0,Xe;function yr(t,e,r){r===void 0&&(r=Nn);var n=He(t,r),i=He(e,r);return D(i)?D(n)?i===n:!1:D(n)?n in i:Object.keys(n).every(function(s){return s in i?yr(n[s],i[s]):!1})}function Pn(t){try{return D(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function tr(t,e){try{return ke(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function Pi(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function He(t,e){if(Pi(t))return t.value;if(ke(t))return yt(t);if(typeof t!="string")return t;var r=tr(t,e);return yt(r)}function yt(t){if(t.length===1)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function Me(t,e){for(var r={},n=Object.keys(t),i=0;i<n.length;i++){var s=n[i];r[s]=e(t[s],s,t,i)}return r}function Lr(t,e,r){var n,i,s={};try{for(var o=R(Object.keys(t)),a=o.next();!a.done;a=o.next()){var u=a.value,l=t[u];!r(l)||(s[u]=e(l,u,t))}}catch(f){n={error:f}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}var Di=function(t){return function(e){var r,n,i=e;try{for(var s=R(t),o=s.next();!o.done;o=s.next()){var a=o.value;i=i[a]}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i}};function ki(t,e){return function(r){var n,i,s=r;try{for(var o=R(t),a=o.next();!a.done;a=o.next()){var u=a.value;s=s[e][u]}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}}function ut(t){if(!t)return[[]];if(D(t))return[[t]];var e=$(Object.keys(t).map(function(r){var n=t[r];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[r]]:ut(t[r]).map(function(i){return[r].concat(i)})}));return e}function $(t){var e;return(e=[]).concat.apply(e,L([],I(t),!1))}function Dn(t){return ke(t)?t:[t]}function ee(t){return t===void 0?[]:Dn(t)}function gt(t,e,r){var n,i;if(C(t))return t(e,r.data);var s={};try{for(var o=R(Object.keys(t)),a=o.next();!a.done;a=o.next()){var u=a.value,l=t[u];C(l)?s[u]=l(e,r.data):s[u]=l}}catch(f){n={error:f}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function Ci(t){return/^(done|error)\./.test(t)}function jr(t){return!!(t instanceof Promise||t!==null&&(C(t)||typeof t=="object")&&C(t.then))}function Ui(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function Li(t,e){var r,n,i=I([[],[]],2),s=i[0],o=i[1];try{for(var a=R(t),u=a.next();!u.done;u=a.next()){var l=u.value;e(l)?s.push(l):o.push(l)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return[s,o]}function kn(t,e){return Me(t.states,function(r,n){if(!!r){var i=(D(e)?void 0:e[n])||(r?r.current:void 0);if(!!i)return{current:i,states:kn(r,i)}}})}function ji(t,e){return{current:e,states:kn(t,e)}}function $r(t,e,r,n){var i=t&&r.reduce(function(s,o){var a,u,l=o.assignment,f={state:n,action:o,_event:e},p={};if(C(l))p=l(s,e.data,f);else try{for(var c=R(Object.keys(l)),d=c.next();!d.done;d=c.next()){var h=d.value,v=l[h];p[h]=C(v)?v(s,e.data,f):v}}catch(m){a={error:m}}finally{try{d&&!d.done&&(u=c.return)&&u.call(c)}finally{if(a)throw a.error}}return Object.assign({},s,p)},t);return i}var rr=function(){};function ke(t){return Array.isArray(t)}function C(t){return typeof t=="function"}function D(t){return typeof t=="string"}function Cn(t,e){if(!!t)return D(t)?{type:er,name:t,predicate:e?e[t]:void 0}:C(t)?{type:er,name:t.name,predicate:t}:t}function $i(t){try{return"subscribe"in t&&C(t.subscribe)}catch{return!1}}var ae=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();Xe={},Xe[ae]=function(){return this},Xe[Symbol.observable]=function(){return this};function Ne(t){return!!t&&"__xstatenode"in t}function Mi(t){return!!t&&typeof t.send=="function"}function gr(t,e){return D(t)||typeof t=="number"?E({type:t},e):t}function H(t,e){if(!D(t)&&"$$type"in t&&t.$$type==="scxml")return t;var r=gr(t);return E({name:r.type,data:r,$$type:"scxml",type:"external"},e)}function ge(t,e){var r=Dn(e).map(function(n){return typeof n>"u"||typeof n=="string"||Ne(n)?{target:n,event:t}:E(E({},n),{event:t})});return r}function Fi(t){if(!(t===void 0||t===Ni))return ee(t)}function Vi(t,e,r){if(!Ge){var n=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";if(t===e)console.error("Missing onError handler for invocation '".concat(r,"', error was '").concat(t,"'.").concat(n));else{var i=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(r,"'. ")+"Original error: '".concat(t,"'. ").concat(n," Current error is '").concat(e,"'.").concat(i))}}}function Un(t,e,r,n,i){var s=t.options.guards,o={state:i,cond:e,_event:n};if(e.type===er)return((s==null?void 0:s[e.name])||e.predicate)(r,n.data,o);var a=s==null?void 0:s[e.type];if(!a)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return a(r,n.data,o)}function Ln(t){return typeof t=="string"?{type:t}:t}function ct(t,e,r){var n=function(){},i=typeof t=="object",s=i?t:null;return{next:((i?t.next:t)||n).bind(s),error:((i?t.error:e)||n).bind(s),complete:((i?t.complete:r)||n).bind(s)}}function Qe(t,e){return"".concat(t,":invocation[").concat(e,"]")}var _e=H({type:_i});function nr(t,e){return e&&e[t]||void 0}function ze(t,e){var r;if(D(t)||typeof t=="number"){var n=nr(t,e);C(n)?r={type:t,exec:n}:n?r=n:r={type:t,exec:void 0}}else if(C(t))r={type:t.name||t.toString(),exec:t};else{var n=nr(t.type,e);if(C(n))r=E(E({},t),{exec:n});else if(n){var i=n.type||t.type;r=E(E(E({},n),t),{type:i})}else r=t}return r}var ue=function(t,e){if(!t)return[];var r=ke(t)?t:[t];return r.map(function(n){return ze(n,e)})};function Er(t){var e=ze(t);return E(E({id:D(t)?t:e.id},e),{type:e.type})}function qi(t){return D(t)?{type:Ie,event:t}:wr(t,{to:ce.Internal})}function Bi(t){return{type:Ie,_event:H(t.event)}}function wr(t,e){return{to:e?e.to:void 0,type:Re,event:C(t)?t:gr(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:C(t)?t.name:Pn(t)}}function Hi(t,e,r,n){var i={_event:r},s=H(C(t.event)?t.event(e,r.data,i):t.event),o;if(D(t.delay)){var a=n&&n[t.delay];o=C(a)?a(e,r.data,i):a}else o=C(t.delay)?t.delay(e,r.data,i):t.delay;var u=C(t.to)?t.to(e,r.data,i):t.to;return E(E({},t),{to:u,_event:s,event:s.data,delay:o})}var Gi=function(t,e,r){return E(E({},t),{value:D(t.expr)?t.expr:t.expr(e,r.data,{_event:r})})},zi=function(t){return{type:xn,sendId:t}};function Wi(t){var e=Er(t);return{type:U.Start,activity:e,exec:void 0}}function Ji(t){var e=C(t)?t:Er(t);return{type:U.Stop,activity:e,exec:void 0}}function Yi(t,e,r){var n=C(t.activity)?t.activity(e,r.data):t.activity,i=typeof n=="string"?{id:n}:n,s={type:U.Stop,activity:i};return s}var Xi=function(t){return{type:mr,assignment:t}};function Qi(t,e){var r=e?"#".concat(e):"";return"".concat(U.After,"(").concat(t,")").concat(r)}function Ke(t,e){var r="".concat(U.DoneState,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function lt(t,e){var r="".concat(U.DoneInvoke,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Fe(t,e){var r="".concat(U.ErrorPlatform,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}var Ki=function(t){var e,r,n=[];try{for(var i=R(t),s=i.next();!s.done;s=i.next())for(var o=s.value,a=0;a<o.length;){if(o[a].type===mr){n.push(o[a]),o.splice(a,1);continue}a++}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n};function Et(t,e,r,n,i,s,o){o===void 0&&(o=!1);var a=o?[]:Ki(i),u=a.length?$r(r,n,a,e):r,l=o?[r]:void 0,f=[];function p(h){var v;switch(h.type){case Ie:return Bi(h);case Re:var m=Hi(h,u,n,t.options.delays);return s&&m.to!==ce.Internal&&f.push(m),m;case In:{var g=Gi(h,u,n);return s==null||s(g,u,n),g}case Ii:{var w=h,S=(v=w.conds.find(function(M){var q=Cn(M.cond,t.options.guards);return!q||Un(t,q,u,n,s?void 0:e)}))===null||v===void 0?void 0:v.actions;if(!S)return[];var O=I(Et(t,e,u,n,[ue(ee(S),t.options.actions)],s,o),2),y=O[0],k=O[1];return u=k,l==null||l.push(u),y}case Ri:{var S=h.get(u,n.data);if(!S)return[];var A=I(Et(t,e,u,n,[ue(ee(S),t.options.actions)],s,o),2),x=A[0],N=A[1];return u=N,l==null||l.push(u),x}case vr:{var g=Yi(h,u,n);return s==null||s(g,r,n),g}case mr:{u=$r(u,n,[h],s?void 0:e),l==null||l.push(u);break}default:var b=ze(h,t.options.actions),P=b.exec;if(s)s(b,u,n);else if(P&&l){var j=l.length-1;b=E(E({},b),{exec:function(M){for(var q=[],se=1;se<arguments.length;se++)q[se-1]=arguments[se];P.apply(void 0,L([l[j]],I(q),!1))}})}return b}}function c(h){var v,m,g=[];try{for(var w=R(h),S=w.next();!S.done;S=w.next()){var O=S.value,y=p(O);y&&(g=g.concat(y))}}catch(k){v={error:k}}finally{try{S&&!S.done&&(m=w.return)&&m.call(w)}finally{if(v)throw v.error}}return f.forEach(function(k){s(k,u,n)}),f.length=0,g}var d=$(i.map(c));return[d,u]}var Oe=function(t,e){var r=e(t);return r};function jn(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[ae]=function(){return this},e}function Zi(t,e,r,n){var i,s=Ln(t.src),o=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[s.type],a=t.data?gt(t.data,r,n):void 0,u=o?$n(o,t.id,a):jn(t.id);return u.meta=t,u}function $n(t,e,r){var n=jn(e);if(n.deferred=!0,Ne(t)){var i=n.state=Oe(void 0,function(){return(r?t.withContext(r):t).initialState});n.getSnapshot=function(){return i}}return n}function es(t){try{return typeof t.send=="function"}catch{return!1}}function ts(t){return es(t)&&"id"in t}function rs(t){var e;return E((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[ae]=function(){return this},e),t)}var wt=function(t){return t.type==="atomic"||t.type==="final"};function Mn(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function We(t){return Mn(t).filter(function(e){return e.type!=="history"})}function Fn(t){var e=[t];return wt(t)?e:e.concat($(We(t).map(Fn)))}function Ve(t,e){var r,n,i,s,o,a,u,l,f=new Set(t),p=ir(f),c=new Set(e);try{for(var d=R(c),h=d.next();!h.done;h=d.next())for(var v=h.value,m=v.parent;m&&!c.has(m);)c.add(m),m=m.parent}catch(N){r={error:N}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}var g=ir(c);try{for(var w=R(c),S=w.next();!S.done;S=w.next()){var v=S.value;if(v.type==="compound"&&(!g.get(v)||!g.get(v).length))p.get(v)?p.get(v).forEach(function(b){return c.add(b)}):v.initialStateNodes.forEach(function(b){return c.add(b)});else if(v.type==="parallel")try{for(var O=(o=void 0,R(We(v))),y=O.next();!y.done;y=O.next()){var k=y.value;c.has(k)||(c.add(k),p.get(k)?p.get(k).forEach(function(b){return c.add(b)}):k.initialStateNodes.forEach(function(b){return c.add(b)}))}}catch(b){o={error:b}}finally{try{y&&!y.done&&(a=O.return)&&a.call(O)}finally{if(o)throw o.error}}}}catch(N){i={error:N}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(i)throw i.error}}try{for(var A=R(c),x=A.next();!x.done;x=A.next())for(var v=x.value,m=v.parent;m&&!c.has(m);)c.add(m),m=m.parent}catch(N){u={error:N}}finally{try{x&&!x.done&&(l=A.return)&&l.call(A)}finally{if(u)throw u.error}}return c}function Vn(t,e){var r=e.get(t);if(!r)return{};if(t.type==="compound"){var n=r[0];if(n){if(wt(n))return n.key}else return{}}var i={};return r.forEach(function(s){i[s.key]=Vn(s,e)}),i}function ir(t){var e,r,n=new Map;try{for(var i=R(t),s=i.next();!s.done;s=i.next()){var o=s.value;n.has(o)||n.set(o,[]),o.parent&&(n.has(o.parent)||n.set(o.parent,[]),n.get(o.parent).push(o))}}catch(a){e={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function ns(t,e){var r=Ve([t],e);return Vn(t,ir(r))}function qe(t,e){return Array.isArray(t)?t.some(function(r){return r===e}):t instanceof Set?t.has(e):!1}function is(t){return L([],I(new Set($(L([],I(t.map(function(e){return e.ownEvents})),!1)))),!1)}function ft(t,e){return e.type==="compound"?We(e).some(function(r){return r.type==="final"&&qe(t,r)}):e.type==="parallel"?We(e).every(function(r){return ft(t,r)}):!1}function ss(t){return t===void 0&&(t=[]),t.reduce(function(e,r){return r.meta!==void 0&&(e[r.id]=r.meta),e},{})}function Mr(t){return new Set($(t.map(function(e){return e.tags})))}function qn(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(D(t)||D(e))return t===e;var r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(function(i){return qn(t[i],e[i])})}function os(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function as(t,e){var r=t.exec,n=E(E({},t),{exec:r!==void 0?function(){return r(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return n}var re=function(){function t(e){var r=this,n;this.actions=[],this.activities=Ur,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Ur,this.meta=ss(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(n=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&n!==void 0?n:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return is(r.configuration)}})}return t.from=function(e,r){if(e instanceof t)return e.context!==r?new t({value:e.value,context:r,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var n=_e;return new t({value:e,context:r,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,r){if(e instanceof t){if(!e.actions.length)return e;var n=_e;return new t({value:e.value,context:r,_event:n,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,r)},t.prototype.toStrings=function(e,r){var n=this;if(e===void 0&&(e=this.value),r===void 0&&(r="."),D(e))return[e];var i=Object.keys(e);return i.concat.apply(i,L([],I(i.map(function(s){return n.toStrings(e[s],r).map(function(o){return s+r+o})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var r=e.tags;e.machine;var n=pr(e,["configuration","transitions","tags","machine"]);return E(E({},n),{tags:Array.from(r)})},t.prototype.matches=function(e){return yr(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var r;rr(!!this.machine);var n=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,e);return!!(n!=null&&n.transitions.length)&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),us={deferEvents:!1},Fr=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=E(E({},us),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},t}(),kt=new Map,cs=0,Ze={bookId:function(){return"x:".concat(cs++)},register:function(t,e){return kt.set(t,e),t},get:function(t){return kt.get(t)},free:function(t){kt.delete(t)}};function Sr(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;Ge||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues")}function ls(){var t=Sr();if(t&&"__xstate__"in t)return t.__xstate__}function fs(t){if(!!Sr()){var e=ls();e&&e.register(t)}}function ds(t,e){e===void 0&&(e={});var r=t.initialState,n=new Set,i=[],s=!1,o=function(){if(!s){for(s=!0;i.length>0;){var l=i.shift();r=t.transition(r,l,u),n.forEach(function(f){return f.next(r)})}s=!1}},a=rs({id:e.id,send:function(l){i.push(l),o()},getSnapshot:function(){return r},subscribe:function(l,f,p){var c=ct(l,f,p);return n.add(c),c.next(r),{unsubscribe:function(){n.delete(c)}}}}),u={parent:e.parent,self:a,id:e.id||"anonymous",observers:n};return r=t.start?t.start(u):r,a}var hs={sync:!1,autoForward:!1},B;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(B||(B={}));var ps=function(){function t(e,r){r===void 0&&(r=t.defaultOptions);var n=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=B.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(f,p){if(ke(f))return n.batch(f),n.state;var c=H(gr(f,p));if(n.status===B.Stopped)return n.state;if(n.status!==B.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(c.name,'" was sent to uninitialized service "').concat(n.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(c.data)));return n.scheduler.schedule(function(){n.forward(c);var d=n._nextState(c);n.update(d,c)}),n._state},this.sendTo=function(f,p,c){var d=n.parent&&(p===ce.Parent||n.parent.id===p),h=d?n.parent:D(p)?n.children.get(p)||Ze.get(p):Mi(p)?p:void 0;if(!h){if(!d)throw new Error("Unable to send event to child '".concat(p,"' from service '").concat(n.id,"'."));return}if("machine"in h){if(n.status!==B.Stopped||n.parent!==h||n.state.done){var v=E(E({},f),{name:f.name===xi?"".concat(Fe(n.id)):f.name,origin:n.sessionId});!c&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([h,v]):h.send(v)}}else!c&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([h,f.data]):h.send(f.data)},this._exec=function(f,p,c,d){d===void 0&&(d=n.machine.options.actions);var h=f.exec||nr(f.type,d),v=C(h)?h:h?h.exec:f.exec;if(v)try{return v(p,c.data,n.machine.config.predictableActionArguments?{action:f,_event:c}:{action:f,state:n.state,_event:c})}catch(j){throw n.parent&&n.parent.send({type:"xstate.error",data:j}),j}switch(f.type){case Re:var m=f;if(typeof m.delay=="number"){n.defer(m);return}else m.to?n.sendTo(m._event,m.to,c===_e):n.send(m._event);break;case xn:n.cancel(f.sendId);break;case Kt:{if(n.status!==B.Running)return;var g=f.activity;if(!n.machine.config.predictableActionArguments&&!n.state.activities[g.id||g.type])break;if(g.type===U.Invoke){var w=Ln(g.src),S=n.machine.options.services?n.machine.options.services[w.type]:void 0,O=g.id,y=g.data,k="autoForward"in g?g.autoForward:!!g.forward;if(!S)return;var A=y?gt(y,p,c):void 0;if(typeof S=="string")return;var x=C(S)?S(p,c.data,{data:A,src:w,meta:g.meta}):S;if(!x)return;var N=void 0;Ne(x)&&(x=A?x.withContext(A):x,N={autoForward:k}),n.spawn(x,O,N)}else n.spawnActivity(g);break}case vr:{n.stopChild(f.activity.id);break}case In:var b=f.label,P=f.value;b?n.logger(b,P):n.logger(P);break}};var i=E(E({},t.defaultOptions),r),s=i.clock,o=i.logger,a=i.parent,u=i.id,l=u!==void 0?u:e.id;this.id=l,this.logger=o,this.clock=s,this.parent=a,this.options=i,this.scheduler=new Fr({deferEvents:this.options.deferEvents}),this.sessionId=Ze.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Oe(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,r){var n,i;try{for(var s=R(e.actions),o=s.next();!o.done;o=s.next()){var a=o.value;this.exec(a,e,r)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.update=function(e,r){var n,i,s,o,a,u,l,f,p=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||r===_e)&&this.options.execute)this.execute(this.state);else for(var c=void 0;c=this._outgoingQueue.shift();)c[0].send(c[1]);if(this.children.forEach(function(N){p.state.children[N.id]=N}),this.devTools&&this.devTools.send(r.data,e),e.event)try{for(var d=R(this.eventListeners),h=d.next();!h.done;h=d.next()){var v=h.value;v(e.event)}}catch(N){n={error:N}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}try{for(var m=R(this.listeners),g=m.next();!g.done;g=m.next()){var v=g.value;v(e,e.event)}}catch(N){s={error:N}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}try{for(var w=R(this.contextListeners),S=w.next();!S.done;S=w.next()){var O=S.value;O(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(N){a={error:N}}finally{try{S&&!S.done&&(u=w.return)&&u.call(w)}finally{if(a)throw a.error}}if(this.state.done){var y=e.configuration.find(function(N){return N.type==="final"&&N.parent===p.machine}),k=y&&y.doneData?gt(y.doneData,e.context,r):void 0;try{for(var A=R(this.doneListeners),x=A.next();!x.done;x=A.next()){var v=x.value;v(lt(this.id,k))}}catch(N){l={error:N}}finally{try{x&&!x.done&&(f=A.return)&&f.call(A)}finally{if(l)throw l.error}}this._stop(),this._stopChildren()}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===B.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,r,n){var i=this,s=ct(e,r,n);this.listeners.add(s.next),this.status!==B.NotStarted&&s.next(this.state);var o=function(){i.doneListeners.delete(o),i.stopListeners.delete(o),s.complete()};return this.status===B.Stopped?s.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){i.listeners.delete(s.next),i.doneListeners.delete(o),i.stopListeners.delete(o)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var r=this;if(this.status===B.Running)return this;this.machine._init(),Ze.register(this.sessionId,this),this.initialized=!0,this.status=B.Running;var n=e===void 0?this.initialState:Oe(this,function(){return os(e)?r.machine.resolveState(e):r.machine.resolveState(re.from(e,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(n,_e)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){C(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,r,n,i,s,o,a,u,l,f;try{for(var p=R(this.listeners),c=p.next();!c.done;c=p.next()){var d=c.value;this.listeners.delete(d)}}catch(A){e={error:A}}finally{try{c&&!c.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}try{for(var h=R(this.stopListeners),v=h.next();!v.done;v=h.next()){var d=v.value;d(),this.stopListeners.delete(d)}}catch(A){n={error:A}}finally{try{v&&!v.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}try{for(var m=R(this.contextListeners),g=m.next();!g.done;g=m.next()){var d=g.value;this.contextListeners.delete(d)}}catch(A){s={error:A}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}try{for(var w=R(this.doneListeners),S=w.next();!S.done;S=w.next()){var d=S.value;this.doneListeners.delete(d)}}catch(A){a={error:A}}finally{try{S&&!S.done&&(u=w.return)&&u.call(w)}finally{if(a)throw a.error}}if(!this.initialized)return this;this.initialized=!1,this.status=B.Stopped,this._initialState=void 0;try{for(var O=R(Object.keys(this.delayedEventsMap)),y=O.next();!y.done;y=O.next()){var k=y.value;this.clock.clearTimeout(this.delayedEventsMap[k])}}catch(A){l={error:A}}finally{try{y&&!y.done&&(f=O.return)&&f.call(O)}finally{if(l)throw l.error}}this.scheduler.clear(),this.scheduler=new Fr({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,r=this.scheduler;return this._stop(),r.schedule(function(){var n=H({type:"xstate.stop"}),i=Oe(e,function(){var s=$(L([],I(e.state.configuration),!1).sort(function(f,p){return p.order-f.order}).map(function(f){return ue(f.onExit,e.machine.options.actions)})),o=I(Et(e.machine,e.state,e.state.context,n,[s],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),a=o[0],u=o[1],l=new re({value:e.state.value,context:u,_event:n,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:a.filter(function(f){return f.type!==Ie&&(f.type!==Re||!!f.to&&f.to!==ce.Internal)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return l.changed=!0,l});e.update(i,n),e._stopChildren(),Ze.free(e.sessionId)}),this},t.prototype.batch=function(e){var r=this;if(this.status===B.NotStarted&&this.options.deferEvents)Ge||rr(!1,"".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,`" and are deferred. Make sure .start() is called for this service.
Event: `).concat(JSON.stringify(event)));else if(this.status!==B.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(!!e.length){var n=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,s,o=r.state,a=!1,u=[],l=function(d){var h=H(d);r.forward(h),o=Oe(r,function(){return r.machine.transition(o,h,void 0,n||void 0)}),u.push.apply(u,L([],I(r.machine.config.predictableActionArguments?o.actions:o.actions.map(function(v){return as(v,o)})),!1)),a=a||!!o.changed};try{for(var f=R(e),p=f.next();!p.done;p=f.next()){var c=p.value;l(c)}}catch(d){i={error:d}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}o.changed=a,o.actions=u,r.update(o,H(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,r){var n=this;r===void 0&&(r=!!this.machine.config.predictableActionArguments&&this._exec);var i=H(e);if(i.name.indexOf(Cr)===0&&!this.state.nextEvents.some(function(o){return o.indexOf(Cr)===0}))throw i.data.data;var s=Oe(this,function(){return n.machine.transition(n.state,i,void 0,r||void 0)});return s},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var r,n;try{for(var i=R(this.forwardTo),s=i.next();!s.done;s=i.next()){var o=s.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));a.send(e)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.defer=function(e){var r=this;this.delayedEventsMap[e.id]=this.clock.setTimeout(function(){e.to?r.sendTo(e._event,e.to,!0):r.send(e._event)},e.delay)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,r,n){n===void 0&&(n=this.machine.options.actions),this._exec(e,r.context,r._event,n)},t.prototype.removeChild=function(e){var r;this.children.delete(e),this.forwardTo.delete(e),(r=this.state)===null||r===void 0||delete r.children[e]},t.prototype.stopChild=function(e){var r=this.children.get(e);!r||(this.removeChild(e),C(r.stop)&&r.stop())},t.prototype.spawn=function(e,r,n){if(this.status!==B.Running)return $n(e,r);if(jr(e))return this.spawnPromise(Promise.resolve(e),r);if(C(e))return this.spawnCallback(e,r);if(ts(e))return this.spawnActor(e,r);if($i(e))return this.spawnObservable(e,r);if(Ne(e))return this.spawnMachine(e,E(E({},n),{id:r}));if(Ui(e))return this.spawnBehavior(e,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,r){var n=this;r===void 0&&(r={});var i=new t(e,E(E({},this.options),{parent:this,id:r.id||e.id})),s=E(E({},hs),r);s.sync&&i.onTransition(function(a){n.send(Rn,{state:a,id:i.id})});var o=i;return this.children.set(i.id,o),s.autoForward&&this.forwardTo.add(i.id),i.onDone(function(a){n.removeChild(i.id),n.send(H(a,{origin:i.id}))}).start(),o},t.prototype.spawnBehavior=function(e,r){var n=ds(e,{id:r,parent:this});return this.children.set(r,n),n},t.prototype.spawnPromise=function(e,r){var n,i=this,s=!1,o;e.then(function(u){s||(o=u,i.removeChild(r),i.send(H(lt(r,u),{origin:r})))},function(u){if(!s){i.removeChild(r);var l=Fe(r,u);try{i.send(H(l,{origin:r}))}catch(f){Vi(u,f,r),i.devTools&&i.devTools.send(l,i.state),i.machine.strict&&i.stop()}}});var a=(n={id:r,send:function(){},subscribe:function(u,l,f){var p=ct(u,l,f),c=!1;return e.then(function(d){c||(p.next(d),!c&&p.complete())},function(d){c||p.error(d)}),{unsubscribe:function(){return c=!0}}},stop:function(){s=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return o}},n[ae]=function(){return this},n);return this.children.set(r,a),a},t.prototype.spawnCallback=function(e,r){var n,i=this,s=!1,o=new Set,a=new Set,u,l=function(c){u=c,a.forEach(function(d){return d(c)}),!s&&i.send(H(c,{origin:r}))},f;try{f=e(l,function(c){o.add(c)})}catch(c){this.send(Fe(r,c))}if(jr(f))return this.spawnPromise(f,r);var p=(n={id:r,send:function(c){return o.forEach(function(d){return d(c)})},subscribe:function(c){var d=ct(c);return a.add(d.next),{unsubscribe:function(){a.delete(d.next)}}},stop:function(){s=!0,C(f)&&f()},toJSON:function(){return{id:r}},getSnapshot:function(){return u}},n[ae]=function(){return this},n);return this.children.set(r,p),p},t.prototype.spawnObservable=function(e,r){var n,i=this,s,o=e.subscribe(function(u){s=u,i.send(H(u,{origin:r}))},function(u){i.removeChild(r),i.send(H(Fe(r,u),{origin:r}))},function(){i.removeChild(r),i.send(H(lt(r),{origin:r}))}),a=(n={id:r,send:function(){},subscribe:function(u,l,f){return e.subscribe(u,l,f)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return s},toJSON:function(){return{id:r}}},n[ae]=function(){return this},n);return this.children.set(r,a),a},t.prototype.spawnActor=function(e,r){return this.children.set(r,e),e},t.prototype.spawnActivity=function(e){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(!r){Ge||rr(!1,"No implementation found for activity '".concat(e.type,"'"));return}var n=r(this.state.context,e);this.spawnEffect(e.id,n)},t.prototype.spawnEffect=function(e,r){var n;this.children.set(e,(n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},n[ae]=function(){return this},n))},t.prototype.attachDev=function(){var e=Sr();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var r=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(E(E({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},r),{features:E({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}fs(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[ae]=function(){return this},t.prototype.getSnapshot=function(){return this.status===B.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,r){return setTimeout(e,r)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=Ae,t}();function Ae(t,e){var r=new ps(t,e);return r}function vs(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function et(t){return E(E({type:Zt},t),{toJSON:function(){t.onDone,t.onError;var e=pr(t,["onDone","onError"]);return E(E({},e),{type:Zt,src:vs(t.src)})}})}var tt="",sr="#",Ct="*",Ee={},we=function(t){return t[0]===sr},ms=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},ys=function(){function t(e,r,n,i){n===void 0&&(n="context"in e?e.context:void 0);var s=this,o;this.config=e,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(ms(),r),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:Nn),this.id=this.config.id||L([this.machine.key],I(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?Me(this.config.states,function(l,f){var p,c=new t(l,{},void 0,{parent:s,key:f});return Object.assign(s.idMap,E((p={},p[c.id]=c,p),c.idMap)),c}):Ee;var a=0;function u(l){var f,p;l.order=a++;try{for(var c=R(Mn(l)),d=c.next();!d.done;d=c.next()){var h=d.value;u(h)}}catch(v){f={error:v}}finally{try{d&&!d.done&&(p=c.return)&&p.call(c)}finally{if(f)throw f.error}}}u(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(l){var f=l.event;return f===tt}):tt in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=ee(this.config.entry||this.config.onEntry).map(function(l){return ze(l)}),this.onExit=ee(this.config.exit||this.config.onExit).map(function(l){return ze(l)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=ee(this.config.invoke).map(function(l,f){var p,c;if(Ne(l)){var d=Qe(s.id,f);return s.machine.options.services=E((p={},p[d]=l,p),s.machine.options.services),et({src:d,id:d})}else if(D(l.src)){var d=l.id||Qe(s.id,f);return et(E(E({},l),{id:d,src:l.src}))}else if(Ne(l.src)||C(l.src)){var d=l.id||Qe(s.id,f);return s.machine.options.services=E((c={},c[d]=l.src,c),s.machine.options.services),et(E(E({id:d},l),{src:d}))}else{var h=l.src;return et(E(E({id:Qe(s.id,f)},l),{src:h}))}}),this.activities=ee(this.config.activities).concat(this.invoke).map(function(l){return Er(l)}),this.transition=this.transition.bind(this),this.tags=ee(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||Fn(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,r){var n=this.options,i=n.actions,s=n.activities,o=n.guards,a=n.services,u=n.delays;return new t(this.config,{actions:E(E({},i),e.actions),activities:E(E({},s),e.activities),guards:E(E({},o),e.guards),services:E(E({},a),e.services),delays:E(E({},u),e.delays)},r!=null?r:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return C(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Me(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var r=e===tt,n=this.transitions.filter(function(i){var s=i.eventType===e;return r?s:s||i.eventType===Ct});return this.__cache.candidates[e]=n,n},t.prototype.getDelayedTransitions=function(){var e=this,r=this.config.after;if(!r)return[];var n=function(s,o){var a=C(s)?"".concat(e.id,":delay[").concat(o,"]"):s,u=Qi(a,e.id);return e.onEntry.push(wr(u,{delay:s})),e.onExit.push(zi(u)),u},i=ke(r)?r.map(function(s,o){var a=n(s.delay,o);return E(E({},s),{event:a})}):$(Object.keys(r).map(function(s,o){var a=r[s],u=D(a)?{target:a}:a,l=isNaN(+s)?s:+s,f=n(l,o);return ee(u).map(function(p){return E(E({},p),{event:f,delay:l})})}));return i.map(function(s){var o=s.delay;return E(E({},e.formatTransition(s)),{delay:o})})},t.prototype.getStateNodes=function(e){var r,n=this;if(!e)return[];var i=e instanceof re?e.value:He(e,this.delimiter);if(D(i)){var s=this.getStateNode(i).initial;return s!==void 0?this.getStateNodes((r={},r[i]=s,r)):[this,this.states[i]]}var o=Object.keys(i),a=[this];return a.push.apply(a,L([],I($(o.map(function(u){return n.getStateNode(u).getStateNodes(i[u])}))),!1)),a},t.prototype.handles=function(e){var r=Pn(e);return this.events.includes(r)},t.prototype.resolveState=function(e){var r=e instanceof re?e:re.create(e),n=Array.from(Ve([],this.getStateNodes(r.value)));return new re(E(E({},r),{value:this.resolve(r.value),configuration:n,done:ft(n,this),tags:Mr(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,r,n){var i=this.getStateNode(e),s=i.next(r,n);return!s||!s.transitions.length?this.next(r,n):s},t.prototype.transitionCompoundNode=function(e,r,n){var i=Object.keys(e),s=this.getStateNode(i[0]),o=s._transition(e[i[0]],r,n);return!o||!o.transitions.length?this.next(r,n):o},t.prototype.transitionParallelNode=function(e,r,n){var i,s,o={};try{for(var a=R(Object.keys(e)),u=a.next();!u.done;u=a.next()){var l=u.value,f=e[l];if(!!f){var p=this.getStateNode(l),c=p._transition(f,r,n);c&&(o[l]=c)}}}catch(w){i={error:w}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}var d=Object.keys(o).map(function(w){return o[w]}),h=$(d.map(function(w){return w.transitions})),v=d.some(function(w){return w.transitions.length>0});if(!v)return this.next(r,n);var m=$(d.map(function(w){return w.entrySet})),g=$(Object.keys(o).map(function(w){return o[w].configuration}));return{transitions:h,entrySet:m,exitSet:$(d.map(function(w){return w.exitSet})),configuration:g,source:r,actions:$(Object.keys(o).map(function(w){return o[w].actions}))}},t.prototype._transition=function(e,r,n){return D(e)?this.transitionLeafNode(e,r,n):Object.keys(e).length===1?this.transitionCompoundNode(e,r,n):this.transitionParallelNode(e,r,n)},t.prototype.getTransitionData=function(e,r){return this._transition(e.value,e,H(r))},t.prototype.next=function(e,r){var n,i,s=this,o=r.name,a=[],u=[],l;try{for(var f=R(this.getCandidates(o)),p=f.next();!p.done;p=f.next()){var c=p.value,d=c.cond,h=c.in,v=e.context,m=h?D(h)&&we(h)?e.matches(He(this.getStateNodeById(h).path,this.delimiter)):yr(He(h,this.delimiter),Di(this.path.slice(0,-2))(e.value)):!0,g=!1;try{g=!d||Un(this.machine,d,v,r,e)}catch(y){throw new Error("Unable to evaluate guard '".concat(d.name||d.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(y.message))}if(g&&m){c.target!==void 0&&(u=c.target),a.push.apply(a,L([],I(c.actions),!1)),l=c;break}}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}if(!!l){if(!u.length)return{transitions:[l],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:a};var w=$(u.map(function(y){return s.getRelativeStateNodes(y,e.historyValue)})),S=!!l.internal,O=[];return S||u.forEach(function(y){O.push.apply(O,L([],I(s.getExternalReentryNodes(y)),!1))}),{transitions:[l],entrySet:O,exitSet:S?[]:[this],configuration:w,source:e,actions:a}}},t.prototype.getExternalReentryNodes=function(e){for(var r=[],n=I(e.order>this.order?[e,this]:[this,e],2),i=n[0],s=n[1];i&&i!==s;)r.push(i),i=i.parent;return i!==s?[]:(r.push(s),r)},t.prototype.getActions=function(e,r,n,i,s,o,a){var u,l,f,p,c=this,d=Ve([],o?this.getStateNodes(o.value):[this]);try{for(var h=R(e),v=h.next();!v.done;v=h.next()){var m=v.value;(!qe(d,m)||qe(n.entrySet,m.parent))&&n.entrySet.push(m)}}catch(b){u={error:b}}finally{try{v&&!v.done&&(l=h.return)&&l.call(h)}finally{if(u)throw u.error}}try{for(var g=R(d),w=g.next();!w.done;w=g.next()){var m=w.value;(!qe(e,m)||qe(n.exitSet,m.parent))&&n.exitSet.push(m)}}catch(b){f={error:b}}finally{try{w&&!w.done&&(p=g.return)&&p.call(g)}finally{if(f)throw f.error}}var S=$(n.entrySet.map(function(b){var P=[];if(b.type!=="final")return P;var j=b.parent;if(!j.parent)return P;P.push(Ke(b.id,b.doneData),Ke(j.id,b.doneData?gt(b.doneData,i,s):void 0));var M=j.parent;return M.type==="parallel"&&We(M).every(function(q){return ft(n.configuration,q)})&&P.push(Ke(M.id)),P}));n.exitSet.sort(function(b,P){return P.order-b.order}),n.entrySet.sort(function(b,P){return b.order-P.order});var O=new Set(n.entrySet),y=new Set(n.exitSet),k=Array.from(O).map(function(b){var P=b.onEntry,j=b.activities.map(function(M){return Wi(M)});return ue(a?L(L([],I(P),!1),I(j),!1):L(L([],I(j),!1),I(P),!1),c.machine.options.actions)}).concat([S.map(qi)]),A=Array.from(y).map(function(b){return ue(L(L([],I(b.onExit),!1),I(b.activities.map(function(P){return Ji(P)})),!1),c.machine.options.actions)}),x=A.concat([ue(n.actions,this.machine.options.actions)]).concat(k);if(r){var N=ue($(L([],I(e),!1).sort(function(b,P){return P.order-b.order}).map(function(b){return b.onExit})),this.machine.options.actions).filter(function(b){return b.type!==Ie&&(b.type!==Re||!!b.to&&b.to!==ce.Internal)});return x.concat([N])}return x},t.prototype.transition=function(e,r,n,i){e===void 0&&(e=this.initialState);var s=H(r),o;if(e instanceof re)o=n===void 0?e:this.resolveState(re.from(e,n));else{var a=D(e)?this.resolve(yt(this.getResolvedPath(e))):this.resolve(e),u=n!=null?n:this.machine.context;o=this.resolveState(re.from(a,u))}if(this.strict&&!this.events.includes(s.name)&&!Ci(s.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(s.name,"'"));var l=this._transition(o.value,o,s)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:o,actions:[]},f=Ve([],this.getStateNodes(o.value)),p=l.configuration.length?Ve(f,l.configuration):f;return l.configuration=L([],I(p),!1),this.resolveTransition(l,o,o.context,i,s)},t.prototype.resolveRaisedTransition=function(e,r,n,i){var s,o=e.actions;return e=this.transition(e,r,void 0,i),e._event=n,e.event=n.data,(s=e.actions).unshift.apply(s,L([],I(o),!1)),e},t.prototype.resolveTransition=function(e,r,n,i,s){var o,a,u,l,f=this;s===void 0&&(s=_e);var p=e.configuration,c=!r||e.transitions.length>0,d=c?e.configuration:r?r.configuration:[],h=ft(d,this),v=c?ns(this.machine,p):void 0,m=r?r.historyValue?r.historyValue:e.source?this.machine.historyValue(r.value):void 0:void 0,g=this.getActions(new Set(d),h,e,n,s,r,i),w=r?E({},r.activities):{};try{for(var S=R(g),O=S.next();!O.done;O=S.next()){var y=O.value;try{for(var k=(u=void 0,R(y)),A=k.next();!A.done;A=k.next()){var x=A.value;x.type===Kt?w[x.activity.id||x.activity.type]=x:x.type===vr&&(w[x.activity.id||x.activity.type]=!1)}}catch(W){u={error:W}}finally{try{A&&!A.done&&(l=k.return)&&l.call(k)}finally{if(u)throw u.error}}}}catch(W){o={error:W}}finally{try{O&&!O.done&&(a=S.return)&&a.call(S)}finally{if(o)throw o.error}}var N=I(Et(this,r,n,s,g,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),b=N[0],P=N[1],j=I(Li(b,function(W){return W.type===Ie||W.type===Re&&W.to===ce.Internal}),2),M=j[0],q=j[1],se=b.filter(function(W){var ye;return W.type===Kt&&((ye=W.activity)===null||ye===void 0?void 0:ye.type)===Zt}),Le=se.reduce(function(W,ye){return W[ye.activity.id]=Zi(ye.activity,f.machine,P,s),W},r?E({},r.children):{}),Ye=new re({value:v||r.value,context:P,_event:s,_sessionid:r?r._sessionid:null,historyValue:v?m?ji(m,v):void 0:r?r.historyValue:void 0,history:!v||e.source?r:void 0,actions:v?q:[],activities:v?w:r?r.activities:{},events:[],configuration:d,transitions:e.transitions,children:Le,done:h,tags:Mr(d),machine:this}),Pr=n!==P;Ye.changed=s.name===Rn||Pr;var me=Ye.history;me&&delete me.history;var Dr=!h&&(this._transient||p.some(function(W){return W._transient}));if(!c&&(!Dr||s.name===tt))return Ye;var Q=Ye;if(!h)for(Dr&&(Q=this.resolveRaisedTransition(Q,{type:Ai},s,i));M.length;){var Si=M.shift();Q=this.resolveRaisedTransition(Q,Si._event,s,i)}var Ti=Q.changed||(me?!!Q.actions.length||Pr||typeof me.value!=typeof Q.value||!qn(Q.value,me.value):void 0);return Q.changed=Ti,Q.history=me,Q},t.prototype.getStateNode=function(e){if(we(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[e];if(!r)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return r},t.prototype.getStateNodeById=function(e){var r=we(e)?e.slice(sr.length):e;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&we(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var r=tr(e,this.delimiter).slice(),n=this;r.length;){var i=r.shift();if(!i.length)break;n=n.getStateNode(i)}return n},t.prototype.resolve=function(e){var r,n=this;if(!e)return this.initialStateValue||Ee;switch(this.type){case"parallel":return Me(this.initialStateValue,function(s,o){return s?n.getStateNode(o).resolve(e[o]||s):Ee});case"compound":if(D(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(r={},r[e]=i.initialStateValue,r):e}return Object.keys(e).length?Me(e,function(s,o){return s?n.getStateNode(o).resolve(s):Ee}):this.initialStateValue||{};default:return e||Ee}},t.prototype.getResolvedPath=function(e){if(we(e)){var r=this.machine.idMap[e.slice(sr.length)];if(!r)throw new Error("Unable to find state node '".concat(e,"'"));return r.path}return tr(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=Lr(this.states,function(n){return n.initialStateValue||Ee},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=wt(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,r){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,entrySet:L([],I(n),!1),exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r!=null?r:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var r=this.config;D(r.target)?e=we(r.target)?yt(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:e=r.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,r,n){return n===void 0&&(n=!0),n?e.type==="history"?e.resolveHistory(r):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(wt(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var r=ut(this.initialStateValue);return $(r.map(function(n){return e.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var r=I(e),n=r[0],i=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var s=this.getStateNode(n);if(s.type==="history")return s.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(!!Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Lr(this.states,function(r,n){if(!e)return r.historyValue();var i=D(e)?void 0:e[n];return r.historyValue(i||r.initialStateValue)},function(r){return!r.history})}},t.prototype.resolveHistory=function(e){var r=this;if(this.type!=="history")return[this];var n=this.parent;if(!e){var i=this.target;return i?$(ut(i).map(function(o){return n.getFromRelativePath(o)})):n.initialStateNodes}var s=ki(n.path,"states")(e).current;return D(s)?[n.getStateNode(s)]:$(ut(s).map(function(o){return r.history==="deep"?n.getFromRelativePath(o):[n.states[o[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,r=$(Object.keys(this.states).map(function(n){return e.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,r,n,i;if(this.__cache.events)return this.__cache.events;var s=this.states,o=new Set(this.ownEvents);if(s)try{for(var a=R(Object.keys(s)),u=a.next();!u.done;u=a.next()){var l=u.value,f=s[l];if(f.states)try{for(var p=(n=void 0,R(f.events)),c=p.next();!c.done;c=p.next()){var d=c.value;o.add("".concat(d))}}catch(h){n={error:h}}finally{try{c&&!c.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}}}catch(h){e={error:h}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var r=this;if(e!==void 0)return e.map(function(n){if(!D(n))return n;var i=n[0]===r.delimiter;if(i&&!r.parent)return r.getStateNodeByPath(n.slice(1));var s=i?r.key+n:n;if(r.parent)try{var o=r.parent.getStateNodeByPath(s);return o}catch(a){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(a.message))}else return r.getStateNodeByPath(s)})},t.prototype.formatTransition=function(e){var r=this,n=Fi(e.target),i="internal"in e?e.internal:n?n.some(function(u){return D(u)&&u[0]===r.delimiter}):!0,s=this.machine.options.guards,o=this.resolveTarget(n),a=E(E({},e),{actions:ue(ee(e.actions)),cond:Cn(e.cond,s),target:o,source:this,internal:i,eventType:e.event,toJSON:function(){return E(E({},a),{target:a.target?a.target.map(function(u){return"#".concat(u.id)}):void 0,source:"#".concat(r.id)})}});return a},t.prototype.formatTransitions=function(){var e,r,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var s=this.config.on,o=Ct,a=s[o],u=a===void 0?[]:a,l=pr(s,[typeof o=="symbol"?o:o+""]);i=$(Object.keys(l).map(function(w){var S=ge(w,l[w]);return S}).concat(ge(Ct,u)))}var f=this.config.always?ge("",this.config.always):[],p=this.config.onDone?ge(String(Ke(this.id)),this.config.onDone):[],c=$(this.invoke.map(function(w){var S=[];return w.onDone&&S.push.apply(S,L([],I(ge(String(lt(w.id)),w.onDone)),!1)),w.onError&&S.push.apply(S,L([],I(ge(String(Fe(w.id)),w.onError)),!1)),S})),d=this.after,h=$(L(L(L(L([],I(p),!1),I(c),!1),I(i),!1),I(f),!1).map(function(w){return ee(w).map(function(S){return n.formatTransition(S)})}));try{for(var v=R(d),m=v.next();!m.done;m=v.next()){var g=m.value;h.push(g)}}catch(w){e={error:w}}finally{try{m&&!m.done&&(r=v.return)&&r.call(v)}finally{if(e)throw e.error}}return h},t}(),Vr=!1;function Je(t,e){return!Ge&&!t.predictableActionArguments&&!Vr&&(Vr=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new ys(t,e)}var V=Xi,te=wr,uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cu(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Bn={exports:{}},Tr={exports:{}},Hn=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},Es=Hn,br=Object.prototype.toString,Or=function(t){return function(e){var r=br.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function ve(t){return t=t.toLowerCase(),function(r){return Or(r)===t}}function Ar(t){return Array.isArray(t)}function St(t){return typeof t>"u"}function ws(t){return t!==null&&!St(t)&&t.constructor!==null&&!St(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var Gn=ve("ArrayBuffer");function Ss(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Gn(t.buffer),e}function Ts(t){return typeof t=="string"}function bs(t){return typeof t=="number"}function zn(t){return t!==null&&typeof t=="object"}function dt(t){if(Or(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var Os=ve("Date"),As=ve("File"),_s=ve("Blob"),xs=ve("FileList");function _r(t){return br.call(t)==="[object Function]"}function Is(t){return zn(t)&&_r(t.pipe)}function Rs(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||br.call(t)===e||_r(t.toString)&&t.toString()===e)}var Ns=ve("URLSearchParams");function Ps(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Ds(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function xr(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Ar(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function or(){var t={};function e(i,s){dt(t[s])&&dt(i)?t[s]=or(t[s],i):dt(i)?t[s]=or({},i):Ar(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)xr(arguments[r],e);return t}function ks(t,e,r){return xr(e,function(i,s){r&&typeof i=="function"?t[s]=Es(i,r):t[s]=i}),t}function Cs(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function Us(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function Ls(t,e,r){var n,i,s,o={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)s=n[i],o[s]||(e[s]=t[s],o[s]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function js(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function $s(t){if(!t)return null;var e=t.length;if(St(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var Ms=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),z={isArray:Ar,isArrayBuffer:Gn,isBuffer:ws,isFormData:Rs,isArrayBufferView:Ss,isString:Ts,isNumber:bs,isObject:zn,isPlainObject:dt,isUndefined:St,isDate:Os,isFile:As,isBlob:_s,isFunction:_r,isStream:Is,isURLSearchParams:Ns,isStandardBrowserEnv:Ds,forEach:xr,merge:or,extend:ks,trim:Ps,stripBOM:Cs,inherits:Us,toFlatObject:Ls,kindOf:Or,kindOfTest:ve,endsWith:js,toArray:$s,isTypedArray:Ms,isFileList:xs},Se=z;function qr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Wn=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Se.isURLSearchParams(r))i=r.toString();else{var s=[];Se.forEach(r,function(u,l){u===null||typeof u>"u"||(Se.isArray(u)?l=l+"[]":u=[u],Se.forEach(u,function(p){Se.isDate(p)?p=p.toISOString():Se.isObject(p)&&(p=JSON.stringify(p)),s.push(qr(l)+"="+qr(p))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},Fs=z;function At(){this.handlers=[]}At.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};At.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};At.prototype.forEach=function(e){Fs.forEach(this.handlers,function(n){n!==null&&e(n)})};var Vs=At,qs=z,Bs=function(e,r){qs.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},Jn=z;function Pe(t,e,r,n,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Jn.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Yn=Pe.prototype,Xn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){Xn[t]={value:t}});Object.defineProperties(Pe,Xn);Object.defineProperty(Yn,"isAxiosError",{value:!0});Pe.from=function(t,e,r,n,i,s){var o=Object.create(Yn);return Jn.toFlatObject(t,o,function(u){return u!==Error.prototype}),Pe.call(o,t.message,e,r,n,i),o.name=t.name,s&&Object.assign(o,s),o};var Ce=Pe,Qn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},K=z;function Hs(t,e){e=e||new FormData;var r=[];function n(s){return s===null?"":K.isDate(s)?s.toISOString():K.isArrayBuffer(s)||K.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function i(s,o){if(K.isPlainObject(s)||K.isArray(s)){if(r.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);r.push(s),K.forEach(s,function(u,l){if(!K.isUndefined(u)){var f=o?o+"."+l:l,p;if(u&&!o&&typeof u=="object"){if(K.endsWith(l,"{}"))u=JSON.stringify(u);else if(K.endsWith(l,"[]")&&(p=K.toArray(u))){p.forEach(function(c){!K.isUndefined(c)&&e.append(f,n(c))});return}}i(u,f)}}),r.pop()}else e.append(o,n(s))}return i(t),e}var Kn=Hs,Ut,Br;function Gs(){if(Br)return Ut;Br=1;var t=Ce;return Ut=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},Ut}var Lt,Hr;function zs(){if(Hr)return Lt;Hr=1;var t=z;return Lt=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,u){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),u===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Lt}var Ws=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Js=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},Ys=Ws,Xs=Js,Zn=function(e,r){return e&&!Ys(r)?Xs(e,r):r},jt,Gr;function Qs(){if(Gr)return jt;Gr=1;var t=z,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return jt=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},jt}var $t,zr;function Ks(){if(zr)return $t;zr=1;var t=z;return $t=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var u=t.isString(a)?s(a):a;return u.protocol===i.protocol&&u.host===i.host}}():function(){return function(){return!0}}(),$t}var Mt,Wr;function _t(){if(Wr)return Mt;Wr=1;var t=Ce,e=z;function r(n){t.call(this,n==null?"canceled":n,t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),Mt=r,Mt}var Ft,Jr;function Zs(){return Jr||(Jr=1,Ft=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),Ft}var Vt,Yr;function Xr(){if(Yr)return Vt;Yr=1;var t=z,e=Gs(),r=zs(),n=Wn,i=Zn,s=Qs(),o=Ks(),a=Qn,u=Ce,l=_t(),f=Zs();return Vt=function(c){return new Promise(function(h,v){var m=c.data,g=c.headers,w=c.responseType,S;function O(){c.cancelToken&&c.cancelToken.unsubscribe(S),c.signal&&c.signal.removeEventListener("abort",S)}t.isFormData(m)&&t.isStandardBrowserEnv()&&delete g["Content-Type"];var y=new XMLHttpRequest;if(c.auth){var k=c.auth.username||"",A=c.auth.password?unescape(encodeURIComponent(c.auth.password)):"";g.Authorization="Basic "+btoa(k+":"+A)}var x=i(c.baseURL,c.url);y.open(c.method.toUpperCase(),n(x,c.params,c.paramsSerializer),!0),y.timeout=c.timeout;function N(){if(!!y){var j="getAllResponseHeaders"in y?s(y.getAllResponseHeaders()):null,M=!w||w==="text"||w==="json"?y.responseText:y.response,q={data:M,status:y.status,statusText:y.statusText,headers:j,config:c,request:y};e(function(Le){h(Le),O()},function(Le){v(Le),O()},q),y=null}}if("onloadend"in y?y.onloadend=N:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(N)},y.onabort=function(){!y||(v(new u("Request aborted",u.ECONNABORTED,c,y)),y=null)},y.onerror=function(){v(new u("Network Error",u.ERR_NETWORK,c,y,y)),y=null},y.ontimeout=function(){var M=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",q=c.transitional||a;c.timeoutErrorMessage&&(M=c.timeoutErrorMessage),v(new u(M,q.clarifyTimeoutError?u.ETIMEDOUT:u.ECONNABORTED,c,y)),y=null},t.isStandardBrowserEnv()){var b=(c.withCredentials||o(x))&&c.xsrfCookieName?r.read(c.xsrfCookieName):void 0;b&&(g[c.xsrfHeaderName]=b)}"setRequestHeader"in y&&t.forEach(g,function(M,q){typeof m>"u"&&q.toLowerCase()==="content-type"?delete g[q]:y.setRequestHeader(q,M)}),t.isUndefined(c.withCredentials)||(y.withCredentials=!!c.withCredentials),w&&w!=="json"&&(y.responseType=c.responseType),typeof c.onDownloadProgress=="function"&&y.addEventListener("progress",c.onDownloadProgress),typeof c.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",c.onUploadProgress),(c.cancelToken||c.signal)&&(S=function(j){!y||(v(!j||j&&j.type?new l:j),y.abort(),y=null)},c.cancelToken&&c.cancelToken.subscribe(S),c.signal&&(c.signal.aborted?S():c.signal.addEventListener("abort",S))),m||(m=null);var P=f(x);if(P&&["http","https","file"].indexOf(P)===-1){v(new u("Unsupported protocol "+P+":",u.ERR_BAD_REQUEST,c));return}y.send(m)})},Vt}var qt,Qr;function eo(){return Qr||(Qr=1,qt=null),qt}var F=z,Kr=Bs,Zr=Ce,to=Qn,ro=Kn,no={"Content-Type":"application/x-www-form-urlencoded"};function en(t,e){!F.isUndefined(t)&&F.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function io(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Xr()),t}function so(t,e,r){if(F.isString(t))try{return(e||JSON.parse)(t),F.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var xt={transitional:to,adapter:io(),transformRequest:[function(e,r){if(Kr(r,"Accept"),Kr(r,"Content-Type"),F.isFormData(e)||F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e))return e;if(F.isArrayBufferView(e))return e.buffer;if(F.isURLSearchParams(e))return en(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=F.isObject(e),i=r&&r["Content-Type"],s;if((s=F.isFileList(e))||n&&i==="multipart/form-data"){var o=this.env&&this.env.FormData;return ro(s?{"files[]":e}:e,o&&new o)}else if(n||i==="application/json")return en(r,"application/json"),so(e);return e}],transformResponse:[function(e){var r=this.transitional||xt.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&F.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?Zr.from(o,Zr.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:eo()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};F.forEach(["delete","get","head"],function(e){xt.headers[e]={}});F.forEach(["post","put","patch"],function(e){xt.headers[e]=F.merge(no)});var Ir=xt,oo=z,ao=Ir,uo=function(e,r,n){var i=this||ao;return oo.forEach(n,function(o){e=o.call(i,e,r)}),e},Bt,tn;function ei(){return tn||(tn=1,Bt=function(e){return!!(e&&e.__CANCEL__)}),Bt}var rn=z,Ht=uo,co=ei(),lo=Ir,fo=_t();function Gt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fo}var ho=function(e){Gt(e),e.headers=e.headers||{},e.data=Ht.call(e,e.data,e.headers,e.transformRequest),e.headers=rn.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),rn.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||lo.adapter;return r(e).then(function(i){return Gt(e),i.data=Ht.call(e,i.data,i.headers,e.transformResponse),i},function(i){return co(i)||(Gt(e),i&&i.response&&(i.response.data=Ht.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Y=z,ti=function(e,r){r=r||{};var n={};function i(f,p){return Y.isPlainObject(f)&&Y.isPlainObject(p)?Y.merge(f,p):Y.isPlainObject(p)?Y.merge({},p):Y.isArray(p)?p.slice():p}function s(f){if(Y.isUndefined(r[f])){if(!Y.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!Y.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(Y.isUndefined(r[f])){if(!Y.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function u(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return Y.forEach(Object.keys(e).concat(Object.keys(r)),function(p){var c=l[p]||s,d=c(p);Y.isUndefined(d)&&c!==u||(n[p]=d)}),n},zt,nn;function ri(){return nn||(nn=1,zt={version:"0.27.2"}),zt}var po=ri().version,oe=Ce,Rr={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Rr[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var sn={};Rr.transitional=function(e,r,n){function i(s,o){return"[Axios v"+po+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new oe(i(o," has been removed"+(r?" in "+r:"")),oe.ERR_DEPRECATED);return r&&!sn[o]&&(sn[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function vo(t,e,r){if(typeof t!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new oe("option "+s+" must be "+u,oe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new oe("Unknown option "+s,oe.ERR_BAD_OPTION)}}var mo={assertOptions:vo,validators:Rr},ni=z,yo=Wn,on=Vs,an=ho,It=ti,go=Zn,ii=mo,Te=ii.validators;function De(t){this.defaults=t,this.interceptors={request:new on,response:new on}}De.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=It(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&ii.assertOptions(n,{silentJSONParsing:Te.transitional(Te.boolean),forcedJSONParsing:Te.transitional(Te.boolean),clarifyTimeoutError:Te.transitional(Te.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(r)===!1||(s=s&&d.synchronous,i.unshift(d.fulfilled,d.rejected))});var o=[];this.interceptors.response.forEach(function(d){o.push(d.fulfilled,d.rejected)});var a;if(!s){var u=[an,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(o),a=Promise.resolve(r);u.length;)a=a.then(u.shift(),u.shift());return a}for(var l=r;i.length;){var f=i.shift(),p=i.shift();try{l=f(l)}catch(c){p(c);break}}try{a=an(l)}catch(c){return Promise.reject(c)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};De.prototype.getUri=function(e){e=It(this.defaults,e);var r=go(e.baseURL,e.url);return yo(r,e.params,e.paramsSerializer)};ni.forEach(["delete","get","head","options"],function(e){De.prototype[e]=function(r,n){return this.request(It(n||{},{method:e,url:r,data:(n||{}).data}))}});ni.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(It(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}De.prototype[e]=r(),De.prototype[e+"Form"]=r(!0)});var Eo=De,Wt,un;function wo(){if(un)return Wt;un=1;var t=_t();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(!!i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(u){i.subscribe(u),o=u}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(!!this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Wt=e,Wt}var Jt,cn;function So(){return cn||(cn=1,Jt=function(e){return function(n){return e.apply(null,n)}}),Jt}var Yt,ln;function To(){if(ln)return Yt;ln=1;var t=z;return Yt=function(r){return t.isObject(r)&&r.isAxiosError===!0},Yt}var fn=z,bo=Hn,ht=Eo,Oo=ti,Ao=Ir;function si(t){var e=new ht(t),r=bo(ht.prototype.request,e);return fn.extend(r,ht.prototype,e),fn.extend(r,e),r.create=function(i){return si(Oo(t,i))},r}var J=si(Ao);J.Axios=ht;J.CanceledError=_t();J.CancelToken=wo();J.isCancel=ei();J.VERSION=ri().version;J.toFormData=Kn;J.AxiosError=Ce;J.Cancel=J.CanceledError;J.all=function(e){return Promise.all(e)};J.spread=So();J.isAxiosError=To();Tr.exports=J;Tr.exports.default=J;(function(t){t.exports=Tr.exports})(Bn);const Rt=gs(Bn.exports);/*! js-cookie v3.0.1 | MIT */function rt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var _o={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ar(t,e){function r(i,s,o){if(!(typeof document>"u")){o=rt({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var u in o)!o[u]||(a+="; "+u,o[u]!==!0&&(a+="="+o[u].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+a}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var u=s[a].split("="),l=u.slice(1).join("=");try{var f=decodeURIComponent(u[0]);if(o[f]=t.read(l,f),i===f)break}catch{}}return i?o[i]:o}}return Object.create({set:r,get:n,remove:function(i,s){r(i,"",rt({},s,{expires:-1}))},withAttributes:function(i){return ar(this.converter,rt({},this.attributes,i))},withConverter:function(i){return ar(rt({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var ur=ar(_o,{path:"/"}),xo=Object.defineProperty,Io=Object.defineProperties,Ro=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,oi=Object.prototype.hasOwnProperty,ai=Object.prototype.propertyIsEnumerable,dn=(t,e,r)=>e in t?xo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,X=(t,e)=>{for(var r in e||(e={}))oi.call(e,r)&&dn(t,r,e[r]);if(Tt)for(var r of Tt(e))ai.call(e,r)&&dn(t,r,e[r]);return t},ie=(t,e)=>Io(t,Ro(e)),ui=(t,e)=>{var r={};for(var n in t)oi.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Tt)for(var n of Tt(t))e.indexOf(n)<0&&ai.call(t,n)&&(r[n]=t[n]);return r};function No(t){return new TextEncoder().encode(t)}function de(t){const e=new Uint8Array(t);let r="";for(const i of e)r+=String.fromCharCode(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Nr(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4,n=e.padEnd(e.length+r,"="),i=atob(n),s=new ArrayBuffer(i.length),o=new Uint8Array(s);for(let a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return s}function ci(){return(window==null?void 0:window.PublicKeyCredential)!==void 0&&typeof window.PublicKeyCredential=="function"}function li(t){const{id:e}=t;return ie(X({},t),{id:Nr(e),transports:t.transports})}function fi(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}class G extends Error{constructor(e,r="WebAuthnError"){super(e),this.name=r}}function Po({error:t,options:e}){var r,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal===new AbortController().signal)return new G("Registration ceremony was sent an abort signal","AbortError")}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new G("Discoverable credentials were required but no available authenticator supported it","ConstraintError");if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new G("User verification was required but no available authenticator supported it","ConstraintError")}else{if(t.name==="InvalidStateError")return new G("The authenticator was previously registered","InvalidStateError");if(t.name==="NotAllowedError")return new G("User clicked cancel, or the registration ceremony timed out","NotAllowedError");if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new G('No entry in pubKeyCredParams was of type "public-key"',"NotSupportedError"):new G("No available authenticator supported any of the specified pubKeyCredParams algorithms","NotSupportedError");if(t.name==="SecurityError"){const s=window.location.hostname;if(fi(s)){if(i.rp.id!==s)return new G(`The RP ID "${i.rp.id}" is invalid for this domain`,"SecurityError")}else return new G(`${window.location.hostname} is an invalid domain`,"SecurityError")}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new G("User ID was not between 1 and 64 characters","TypeError")}else if(t.name==="UnknownError")return new G("The authenticator was unable to process the specified options, or could not create a new credential","UnknownError")}return t}class Do{createNewAbortSignal(){return this.controller&&this.controller.abort(),this.controller=new AbortController,this.controller.signal}reset(){this.controller=void 0}}const bt=new Do;async function ko(t){if(!ci())throw new Error("WebAuthn is not supported in this browser");const r={publicKey:ie(X({},t),{challenge:Nr(t.challenge),user:ie(X({},t.user),{id:No(t.user.id)}),excludeCredentials:t.excludeCredentials.map(li)})};r.signal=bt.createNewAbortSignal();let n;try{n=await navigator.credentials.create(r)}catch(l){throw Po({error:l,options:r})}finally{bt.reset()}if(!n)throw new Error("Registration was not completed");const{id:i,rawId:s,response:o,type:a}=n,u={id:i,rawId:de(s),response:{attestationObject:de(o.attestationObject),clientDataJSON:de(o.clientDataJSON)},type:a,clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:n.authenticatorAttachment};return typeof o.getTransports=="function"&&(u.transports=o.getTransports()),u}function Co(t){return new TextDecoder("utf-8").decode(t)}async function Uo(){if(navigator.credentials.conditionalMediationSupported)return!0;const t=window.PublicKeyCredential;return t.isConditionalMediationAvailable!==void 0&&t.isConditionalMediationAvailable()}function Lo({error:t,options:e}){var r;const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal===new AbortController().signal)return new G("Authentication ceremony was sent an abort signal","AbortError")}else{if(t.name==="NotAllowedError")return!((r=n.allowCredentials)===null||r===void 0)&&r.length?new G("No available authenticator recognized any of the allowed credentials","NotAllowedError"):new G("User clicked cancel, or the authentication ceremony timed out","NotAllowedError");if(t.name==="SecurityError"){const i=window.location.hostname;if(fi(i)){if(n.rpId!==i)return new G(`The RP ID "${n.rpId}" is invalid for this domain`,"SecurityError")}else return new G(`${window.location.hostname} is an invalid domain`,"SecurityError")}else if(t.name==="UnknownError")return new G("The authenticator was unable to process the specified options, or could not create a new assertion signature","UnknownError")}return t}async function jo(t,e=!1){var r,n;if(!ci())throw new Error("WebAuthn is not supported in this browser");let i;((r=t.allowCredentials)===null||r===void 0?void 0:r.length)!==0&&(i=(n=t.allowCredentials)===null||n===void 0?void 0:n.map(li));const s=ie(X({},t),{challenge:Nr(t.challenge),allowCredentials:i}),o={};if(e){if(!await Uo())throw Error("Browser does not support WebAuthn autofill");if(document.querySelectorAll("input[autocomplete*='webauthn']").length<1)throw Error('No <input> with `"webauthn"` in its `autocomplete` attribute was detected');o.mediation="conditional",s.allowCredentials=[]}o.publicKey=s,o.signal=bt.createNewAbortSignal();let a;try{a=await navigator.credentials.get(o)}catch(d){throw Lo({error:d,options:o})}finally{bt.reset()}if(!a)throw new Error("Authentication was not completed");const{id:u,rawId:l,response:f,type:p}=a;let c;return f.userHandle&&(c=Co(f.userHandle)),{id:u,rawId:de(l),response:{authenticatorData:de(f.authenticatorData),clientDataJSON:de(f.clientDataJSON),signature:de(f.signature),userHandle:c},type:p,clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:a.authenticatorAttachment}}const nt="nhostRefreshToken",it="nhostRefreshTokenExpiresAt",$o=3,Mo=300,Fo=5,Vo=0,qo=1,le=10,Nt=20;class cr extends Error{constructor(e){super(e.message),Error.captureStackTrace(this,this.constructor),e instanceof Error?(this.name=e.name,this.error={error:e.name,status:qo,message:e.message}):(this.name=e.error,this.error=e)}}const he={status:le,error:"invalid-email",message:"Email is incorrectly formatted"},lr={status:le,error:"invalid-password",message:"Password is incorrectly formatted"},hn={status:le,error:"invalid-phone-number",message:"Phone number is incorrectly formatted"},Bo={status:le,error:"invalid-mfa-ticket",message:"MFA ticket is invalid"},Ho={status:le,error:"no-mfa-ticket",message:"No MFA ticket has been provided"},Go={status:le,error:"no-refresh-token",message:"No refresh token has been provided"},zo={status:Nt,error:"refresher-already-running",message:"The token refresher is already running. You must wait until is has finished before submitting a new token."},fe={status:Nt,error:"already-signed-in",message:"User is already signed in"},Wo={status:Nt,error:"unauthenticated-user",message:"User is not authenticated"},Jo={status:Nt,error:"unverified-user",message:"Email needs verification"},Yo={status:le,error:"invalid-refresh-token",message:"Invalid or expired refresh token"},Ue=t=>{const e=Rt.create({baseURL:t});return e.interceptors.response.use(r=>r,r=>{var n,i,s,o,a,u,l,f,p,c;return Promise.reject({error:{message:(a=(o=(s=(i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)!=null?s:r.message)!=null?o:r.request.responseText)!=null?a:JSON.stringify(r),status:(p=(f=(u=r.response)==null?void 0:u.status)!=null?f:(l=r.response)==null?void 0:l.data.statusCode)!=null?p:Vo,error:((c=r.response)==null?void 0:c.data.error)||r.request.statusText||"network"}})}),e},Pt=typeof window<"u",pt=new Map,Xo=t=>{var e;return Pt&&typeof localStorage<"u"?localStorage.getItem(t):(e=pt.get(t))!=null?e:null},Qo=(t,e)=>{Pt&&typeof localStorage<"u"?e?localStorage.setItem(t,e):localStorage.removeItem(t):e?pt.set(t,e):pt.has(t)&&pt.delete(t)},Ko=(t,e)=>{if(t==="localStorage"||t==="web")return Xo;if(t==="cookie")return r=>{var n;return Pt&&(n=ur.get(r))!=null?n:null};if(!e)throw Error(`clientStorageType is set to '${t}' but no clientStorage has been given`);if(t==="react-native")return r=>{var n;return(n=e.getItem)==null?void 0:n.call(e,r)};if(t==="capacitor")return r=>{var n;return(n=e.get)==null?void 0:n.call(e,{key:r})};if(t==="expo-secure-storage")return r=>{var n;return(n=e.getItemAsync)==null?void 0:n.call(e,r)};if(t==="custom"){if(e.getItem&&e.removeItem)return e.getItem;if(e.getItemAsync)return e.getItemAsync;throw Error(`clientStorageType is set to 'custom' but clientStorage is missing either "getItem" and "removeItem" properties or "getItemAsync" property`)}throw Error(`Unknown storage type: ${t}`)},Zo=(t,e)=>{if(t==="localStorage"||t==="web")return Qo;if(t==="cookie")return(r,n)=>{Pt&&(n?ur.set(r,n,{expires:30}):ur.remove(r))};if(!e)throw Error(`clientStorageType is set to '${t}' but no clienStorage has been given`);if(t==="react-native")return(r,n)=>{var i,s;return n?(i=e.setItem)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};if(t==="capacitor")return(r,n)=>{var i,s;return n?(i=e.set)==null?void 0:i.call(e,{key:r,value:n}):(s=e.remove)==null?void 0:s.call(e,{key:r})};if(t==="expo-secure-storage")return async(r,n)=>{var i,s;return n?(i=e.setItemAsync)==null?void 0:i.call(e,r,n):(s=e.deleteItemAsync)==null?void 0:s.call(e,r)};if(t==="custom"){if(!e.removeItem)throw Error("clientStorageType is set to 'custom' but clientStorage is missing a removeItem property");if(e.setItem)return(r,n)=>{var i,s;return n?(i=e.setItem)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};if(e.setItemAsync)return async(r,n)=>{var i,s;return n?(i=e.setItemAsync)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};throw Error("clientStorageType is set to 'custom' but clientStorage is missing setItem or setItemAsync property")}throw Error(`Unknown storage type: ${t}`)},di=(t,e)=>{const r=e&&Object.entries(e).map(([n,i])=>{const s=Array.isArray(i)?i.join(","):typeof i=="object"?JSON.stringify(i):i;return`${n}=${encodeURIComponent(s)}`}).join("&");return r?`${t}?${r}`:t},ne=(t,e)=>{if(!(e!=null&&e.redirectTo))return e;const r=e,{redirectTo:n}=r,i=ui(r,["redirectTo"]);if(!t)return n.startsWith("/")?i:e;const s=new URL(t),o=Object.fromEntries(new URLSearchParams(s.search)),a=new URL(n.startsWith("/")?s.origin+n:n),u=new URLSearchParams(a.search);let l=Object.fromEntries(u);n.startsWith("/")&&(l=X(X({},o),l));let f=s.pathname;return a.pathname.length>1&&(f+=a.pathname.slice(1)),ie(X({},i),{redirectTo:di(a.origin+f,l)})};function st(t,e){var r;if(!e){if(typeof window>"u")return;e=((r=window.location)==null?void 0:r.href)||""}t=t.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+t+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function pn(t){var e;if(typeof window>"u")return;const r=window==null?void 0:window.location;if(!!r&&r){const n=new URLSearchParams(r.search),i=new URLSearchParams((e=r.hash)==null?void 0:e.slice(1));n.delete(t),i.delete(t);let s=window.location.pathname;Array.from(n).length&&(s+=`?${n.toString()}`),Array.from(i).length&&(s+=`#${i.toString()}`),window.history.pushState({},"",s)}}const pe=t=>!!t&&typeof t=="string"&&!!String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),fr=t=>!!t&&typeof t=="string"&&t.length>=$o,vn=t=>!!t&&typeof t=="string",ea=t=>t&&typeof t=="string"&&t.match(/^mfaTotp:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),Xt={user:null,mfa:null,accessToken:{value:null,expiresAt:null},refreshTimer:{startedAt:null,attempts:0,lastAttempt:null},refreshToken:{value:null},errors:{}},ta=({backendUrl:t,clientUrl:e,interpreter:r})=>{const n=Ue(t);return Je({schema:{context:{},events:{},services:{}},tsTypes:{},preserveActionOrder:!0,id:"changeEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:V({error:i=>he}),saveRequestError:V({error:(i,{data:{error:s}})=>s}),reportError:te(i=>({type:"ERROR",error:i.error})),reportSuccess:te("SUCCESS")},guards:{invalidEmail:(i,{email:s})=>!pe(s)},services:{requestChange:async(i,{email:s,options:o})=>(await n.post("/user/email/change",{newEmail:s,options:ne(e,o)},{headers:{authorization:`Bearer ${r==null?void 0:r.state.context.accessToken.value}`}})).data}})},ra=({backendUrl:t,interpreter:e})=>{const r=Ue(t);return Je({schema:{context:{},events:{},services:{}},tsTypes:{},preserveActionOrder:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidPassword",actions:"saveInvalidPasswordError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidPasswordError:V({error:n=>lr}),saveRequestError:V({error:(n,{data:{error:i}})=>i}),reportError:te(n=>({type:"ERROR",error:n.error})),reportSuccess:te("SUCCESS")},guards:{invalidPassword:(n,{password:i})=>!fr(i)},services:{requestChange:(n,{password:i,ticket:s})=>r.post("/user/password",{newPassword:i,ticket:s},{headers:{authorization:`Bearer ${e==null?void 0:e.state.context.accessToken.value}`}})}})},na=({backendUrl:t,clientUrl:e})=>{const r=Ue(t);return Je({schema:{context:{},events:{},services:{}},tsTypes:{},preserveActionOrder:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:V({error:n=>he}),saveRequestError:V({error:(n,{data:{error:i}})=>i}),reportError:te(n=>({type:"ERROR",error:n.error})),reportSuccess:te("SUCCESS")},guards:{invalidEmail:(n,{email:i})=>!pe(i)},services:{requestChange:(n,{email:i,options:s})=>r.post("/user/password/reset",{email:i,options:ne(e,s)})}})},ia=({backendUrl:t,clientUrl:e})=>{const r=Ue(t);return Je({schema:{context:{},events:{},services:{}},tsTypes:{},preserveActionOrder:!0,id:"sendVerificationEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"request",id:"request",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:V({error:n=>he}),saveRequestError:V({error:(n,{data:{error:i}})=>i}),reportError:te(n=>({type:"ERROR",error:n.error})),reportSuccess:te("SUCCESS")},guards:{invalidEmail:(n,{email:i})=>!pe(i)},services:{request:async(n,{email:i,options:s})=>(await r.post("/user/email/send-verification-email",{email:i,options:ne(e,s)})).data}})},sa=({backendUrl:t,clientUrl:e,clientStorageGetter:r,clientStorageSetter:n,clientStorageType:i="web",clientStorage:s,refreshIntervalTime:o,autoRefreshToken:a=!0,autoSignIn:u=!0})=>{const l=r||Ko(i,s),f=n||Zo(i,s),p=Ue(t),c=async(d,h,v)=>(await p.post(d,h,v)).data;return Je({schema:{context:{},events:{},services:{}},tsTypes:{},context:Xt,preserveActionOrder:!0,id:"nhost",type:"parallel",states:{authentication:{initial:"starting",on:{SESSION_UPDATE:[{cond:"hasSession",actions:["saveSession","resetTimer","reportTokenChanged"],target:".signedIn"}]},states:{starting:{entry:"resetErrors",tags:["loading"],always:{cond:"isSignedIn",target:"signedIn"},invoke:{id:"importRefreshToken",src:"importRefreshToken",onDone:{actions:["saveSession","reportTokenChanged"],target:"signedIn"},onError:{actions:["saveAuthenticationError"],target:"signedOut"}}},signedOut:{initial:"noErrors",entry:"reportSignedOut",states:{noErrors:{},success:{},needsSmsOtp:{},needsMfa:{},failed:{},signingOut:{entry:["clearContextExceptRefreshToken"],exit:["destroyRefreshToken","reportTokenChanged"],invoke:{src:"signout",id:"signingOut",onDone:{target:"success"},onError:{target:"failed",actions:["saveAuthenticationError"]}}}},on:{SIGNIN_PASSWORD:"authenticating.password",SIGNIN_ANONYMOUS:"authenticating.anonymous",SIGNIN_SECURITY_KEY_EMAIL:"authenticating.securityKeyEmail",SIGNIN_MFA_TOTP:"authenticating.mfa.totp"}},authenticating:{entry:"resetErrors",states:{password:{invoke:{src:"signInPassword",id:"authenticateUserWithPassword",onDone:[{cond:"hasMfaTicket",actions:["saveMfaTicket"],target:"#nhost.authentication.signedOut.needsMfa"},{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"}],onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}},anonymous:{invoke:{src:"signInAnonymous",id:"authenticateAnonymously",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}}},mfa:{states:{totp:{invoke:{src:"signInMfaTotp",id:"signInMfaTotp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:["saveAuthenticationError"],target:"#nhost.authentication.signedOut.failed"}}}}},securityKeyEmail:{invoke:{src:"signInSecurityKeyEmail",id:"authenticateUserWithSecurityKey",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}}}},signedIn:{type:"parallel",entry:["reportSignedIn","cleanUrl","broadcastToken","resetErrors"],on:{SIGNOUT:"signedOut.signingOut"},states:{refreshTimer:{id:"timer",initial:"idle",states:{disabled:{type:"final"},stopped:{always:{cond:"noToken",target:"idle"}},idle:{always:[{cond:"isAutoRefreshDisabled",target:"disabled"},{cond:"hasRefreshToken",target:"running"}]},running:{initial:"pending",entry:"resetTimer",states:{pending:{after:{1e3:{internal:!1,target:"pending"}},always:{cond:"refreshTimerShouldRefresh",target:"refreshing"}},refreshing:{invoke:{src:"refreshToken",id:"refreshToken",onDone:{actions:["saveSession","resetTimer","reportTokenChanged"],target:"pending"},onError:[{actions:"saveRefreshAttempt",target:"pending"}]}}}}}}}}}},token:{initial:"idle",states:{idle:{on:{TRY_TOKEN:"running"},initial:"noErrors",states:{noErrors:{},error:{}}},running:{invoke:{src:"refreshToken",id:"authenticateWithToken",onDone:{actions:["saveSession","reportTokenChanged"],target:["#nhost.authentication.signedIn","idle.noErrors"]},onError:[{cond:"isSignedIn",target:"idle.error"},{actions:"saveAuthenticationError",target:["#nhost.authentication.signedOut.failed","idle.error"]}]}}}},registration:{initial:"incomplete",on:{SIGNED_IN:[{cond:"isAnonymous",target:".incomplete"},".complete"]},states:{incomplete:{on:{SIGNUP_EMAIL_PASSWORD:"emailPassword",PASSWORDLESS_EMAIL:"passwordlessEmail",PASSWORDLESS_SMS:"passwordlessSms",PASSWORDLESS_SMS_OTP:"passwordlessSmsOtp"},initial:"noErrors",states:{noErrors:{},needsEmailVerification:{},needsOtp:{},failed:{}}},emailPassword:{entry:["resetErrors"],invoke:{src:"signUpEmailPassword",id:"signUpEmailPassword",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},passwordlessEmail:{entry:["resetErrors"],invoke:{src:"passwordlessEmail",id:"passwordlessEmail",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSms:{entry:["resetErrors"],invoke:{src:"passwordlessSms",id:"passwordlessSms",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsOtp"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSmsOtp:{entry:["resetErrors"],invoke:{src:"passwordlessSmsOtp",id:"passwordlessSmsOtp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},complete:{on:{SIGNED_OUT:"incomplete"}}}}}},{actions:{reportSignedIn:te("SIGNED_IN"),reportSignedOut:te("SIGNED_OUT"),reportTokenChanged:te("TOKEN_CHANGED"),clearContext:V(()=>(f(it,null),f(nt,null),X({},Xt))),clearContextExceptRefreshToken:V(({refreshToken:{value:d}})=>(f(it,null),ie(X({},Xt),{refreshToken:{value:d}}))),saveSession:V({user:(d,{data:h})=>{var v;return((v=h==null?void 0:h.session)==null?void 0:v.user)||null},accessToken:(d,{data:h})=>{if(h.session){const{accessTokenExpiresIn:v,accessToken:m}=h.session,g=new Date(Date.now()+v*1e3);return f(it,g.toISOString()),{value:m,expiresAt:g}}return f(it,null),{value:null,expiresAt:null}},refreshToken:(d,{data:h})=>{var v;const m=((v=h.session)==null?void 0:v.refreshToken)||null;return m&&f(nt,m),{value:m}}}),saveMfaTicket:V({mfa:(d,h)=>{var v;return(v=h.data)==null?void 0:v.mfa}}),resetTimer:V({refreshTimer:d=>({startedAt:new Date,attempts:0,lastAttempt:null})}),saveRefreshAttempt:V({refreshTimer:(d,h)=>({startedAt:d.refreshTimer.startedAt,attempts:d.refreshTimer.attempts+1,lastAttempt:new Date})}),saveAuthenticationError:V({errors:({errors:d},{data:{error:h}})=>ie(X({},d),{authentication:h})}),resetErrors:V({errors:d=>({})}),saveRegistrationError:V({errors:({errors:d},{data:{error:h}})=>ie(X({},d),{registration:h})}),destroyRefreshToken:V({refreshToken:d=>(f(nt,null),{value:null})}),cleanUrl:()=>{u&&st("refreshToken")&&(pn("refreshToken"),pn("type"))},broadcastToken:d=>{if(u)try{new BroadcastChannel("nhost").postMessage(d.refreshToken.value)}catch{}}},guards:{isAnonymous:(d,h)=>{var v;return!!((v=d.user)!=null&&v.isAnonymous)},isSignedIn:d=>!!d.user&&!!d.refreshToken.value&&!!d.accessToken.value,noToken:d=>!d.refreshToken.value,hasRefreshToken:d=>!!d.refreshToken.value,isAutoRefreshDisabled:()=>!a,refreshTimerShouldRefresh:d=>{const{expiresAt:h}=d.accessToken;return h?d.refreshTimer.lastAttempt?Date.now()-d.refreshTimer.lastAttempt.getTime()>Fo*1e3:o&&Date.now()-d.refreshTimer.startedAt.getTime()>o*1e3?!0:h.getTime()-Date.now()-1e3*Mo<=0:!1},unverified:(d,{data:{error:h}})=>h.status===401&&(h.message==="Email is not verified"||h.error==="unverified-user"),hasSession:(d,h)=>{var v;return!!((v=h.data)!=null&&v.session)},hasMfaTicket:(d,h)=>{var v;return!!((v=h.data)!=null&&v.mfa)}},services:{signInPassword:(d,{email:h,password:v})=>pe(h)?fr(v)?c("/signin/email-password",{email:h,password:v}):Promise.reject({error:lr}):Promise.reject({error:he}),passwordlessSms:(d,{phoneNumber:h,options:v})=>{var m;return vn(h)?(m=d.user)!=null&&m.isAnonymous?(console.warn("Deanonymisation from a phone number is not yet implemented in hasura-auth"),c("/user/deanonymize",{signInMethod:"passwordless",connection:"sms",phoneNumber:h,options:ne(e,v)},{headers:{authorization:`Bearer ${d.accessToken.value}`}})):c("/signin/passwordless/sms",{phoneNumber:h,options:ne(e,v)}):Promise.reject({error:hn})},passwordlessSmsOtp:(d,{phoneNumber:h,otp:v})=>vn(h)?c("/signin/passwordless/sms/otp",{phoneNumber:h,otp:v}):Promise.reject({error:hn}),passwordlessEmail:(d,{email:h,options:v})=>{var m;return pe(h)?(m=d.user)!=null&&m.isAnonymous?c("/user/deanonymize",{signInMethod:"passwordless",connection:"email",email:h,options:ne(e,v)},{headers:{authorization:`Bearer ${d.accessToken.value}`}}):c("/signin/passwordless/email",{email:h,options:ne(e,v)}):Promise.reject({error:he})},signInAnonymous:d=>c("/signin/anonymous"),signInMfaTotp:(d,h)=>{var v;const m=h.ticket||((v=d.mfa)==null?void 0:v.ticket);return m?ea(m)?c("/signin/mfa/totp",{ticket:m,otp:h.otp}):Promise.reject({error:Bo}):Promise.reject({error:Ho})},signInSecurityKeyEmail:async(d,{email:h})=>{if(!pe(h))throw new cr(he);const v=await c("/signin/webauthn",{email:h});let m;try{m=await jo(v)}catch(g){throw new cr(g)}return c("/signin/webauthn/verify",{email:h,credential:m})},refreshToken:async(d,h)=>{const v=h.type==="TRY_TOKEN"?h.token:d.refreshToken.value;return{session:await c("/token",{refreshToken:v}),error:null}},signout:(d,h)=>c("/signout",{refreshToken:d.refreshToken.value,all:!!h.all}),signUpEmailPassword:async(d,{email:h,password:v,options:m})=>{var g;return pe(h)?fr(v)?(g=d.user)!=null&&g.isAnonymous?c("/user/deanonymize",{signInMethod:"email-password",email:h,password:v,options:ne(e,m)},{headers:{authorization:`Bearer ${d.accessToken.value}`}}):c("/signup/email-password",{email:h,password:v,options:ne(e,m)}):Promise.reject({error:lr}):Promise.reject({error:he})},importRefreshToken:async()=>{let d=null;if(u){const v=st("refreshToken")||null;if(v)try{return{session:await c("/token",{refreshToken:v}),error:null}}catch(m){d=m.error}else{const m=st("error");if(m)return Promise.reject({session:null,error:{status:le,error:m,message:st("errorDescription")||m}})}}const h=await l(nt);if(h)try{return{session:await c("/token",{refreshToken:h}),error:null}}catch(v){d=v.error}return Promise.reject({error:d})}}})};class oa{constructor(e){var r=e,{clientStorageType:n="web",autoSignIn:i=!0,autoRefreshToken:s=!0,start:o=!0,backendUrl:a,clientUrl:u,devTools:l}=r,f=ui(r,["clientStorageType","autoSignIn","autoRefreshToken","start","backendUrl","clientUrl","devTools"]);if(this._subscriptions=new Set,this.backendUrl=a,this.clientUrl=u,this.machine=sa(ie(X({},f),{backendUrl:a,clientUrl:u,clientStorageType:n,autoSignIn:i,autoRefreshToken:s})),o&&(this.interpreter=Ae(this.machine,{devTools:l}),this.interpreter.start()),typeof window<"u"&&i)try{this._channel=new BroadcastChannel("nhost"),this._channel.addEventListener("message",p=>{var c;const d=(c=this.interpreter)==null?void 0:c.state.context.refreshToken.value;this.interpreter&&p.data!==d&&this.interpreter.send("TRY_TOKEN",{token:p.data})})}catch{}}get interpreter(){return this._interpreter}set interpreter(e){this._interpreter=e,e&&this._subscriptions.forEach(r=>r(this))}onStart(e){this.interpreter?e(this):this._subscriptions.add(e)}}const aa=async({backendUrl:t,interpreter:e},r)=>{const n=Ue(t);try{const{data:i}=await n.post("/user/webauthn/add",{},{headers:{authorization:`Bearer ${e==null?void 0:e.state.context.accessToken.value}`}});let s;try{s=await ko(i)}catch(a){throw new cr(a)}const{data:o}=await n.post("/user/webauthn/verify",{credential:s,nickname:r},{headers:{authorization:`Bearer ${e==null?void 0:e.state.context.accessToken.value}`}});return{key:o,isError:!1,error:null,isSuccess:!0}}catch(i){const{error:s}=i;return{isError:!0,error:s,isSuccess:!1}}},ua=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,needsEmailVerification:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,needsEmailVerification:!0})})}),ca=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{password:e,ticket:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSuccess:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSuccess:!0})})}),la=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSent:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSent:!0})})}),fa=(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSent:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSent:!0})})}),da=t=>new Promise(e=>{const{changed:r}=t.send("SIGNIN_ANONYMOUS");r||e({isSuccess:!1,isError:!0,error:fe,user:null,accessToken:null}),t.onTransition(n=>{n.matches({authentication:"signedIn"})&&e({isSuccess:!0,isError:!1,error:null,user:n.context.user,accessToken:n.context.accessToken.value}),n.matches({authentication:{signedOut:"failed"}})&&e({isSuccess:!1,isError:!0,error:n.context.errors.authentication||null,user:null,accessToken:null})})}),ha=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNIN_PASSWORD",{email:e,password:r});if(!i)return n({accessToken:s.accessToken.value,error:fe,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:s.user});t.onTransition(o=>{o.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,needsMfaOtp:!1,mfa:null,user:null}):o.matches({authentication:{signedOut:"needsMfa"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!0,mfa:o.context.mfa,user:null}):o.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:null}):o.matches({authentication:"signedIn"})&&n({accessToken:o.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:o.context.user})})}),mn=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send("PASSWORDLESS_EMAIL",{email:e,options:r});if(!i)return n({error:fe,isError:!0,isSuccess:!1});t.onTransition(s=>{s.matches("registration.incomplete.failed")?n({error:s.context.errors.registration||null,isError:!0,isSuccess:!1}):s.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})&&n({error:null,isError:!1,isSuccess:!0})})}),pa=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNIN_MFA_TOTP",{otp:e,ticket:r});if(!i)return n({accessToken:s.accessToken.value,error:fe,isError:!0,isSuccess:!1,user:s.user});t.onTransition(o=>{o.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null}):o.matches({authentication:"signedIn"})&&n({accessToken:o.context.accessToken.value,error:null,isError:!1,isSuccess:!0,user:o.context.user})})}),va=(t,e)=>new Promise(r=>{const{changed:n,context:i}=t.send({type:"SIGNIN_SECURITY_KEY_EMAIL",email:e});if(!n)return r({accessToken:i.accessToken.value,error:fe,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:i.user});t.onTransition(s=>{s.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?r({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):s.matches({authentication:{signedOut:"failed"}})?r({accessToken:null,error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):s.matches({authentication:"signedIn"})&&r({accessToken:s.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:s.context.user})})}),yn=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send("PASSWORDLESS_SMS",{phoneNumber:e,options:r});if(!i)return n({error:fe,isError:!0,isSuccess:!1,needsOtp:!1});t.onTransition(s=>{s.matches("registration.incomplete.needsOtp")?n({error:null,isError:!1,isSuccess:!1,needsOtp:!0}):s.matches("registration.incomplete.failed")&&n({error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,needsOtp:!1})})}),ma=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send({type:"PASSWORDLESS_SMS_OTP",phoneNumber:e,otp:r});if(!i)return n({error:fe,isError:!0,isSuccess:!1,user:null,accessToken:null});t.onTransition(s=>{s.matches({authentication:"signedIn"})?n({error:null,isError:!1,isSuccess:!0,user:s.context.user,accessToken:s.context.accessToken.value}):s.matches({registration:{incomplete:"failed"}})&&n({error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null,accessToken:null})})}),ya=async(t,e)=>new Promise(r=>{const{event:n}=t.send("SIGNOUT",{all:e});if(n.type!=="SIGNED_OUT")return r({isSuccess:!1,isError:!0,error:Wo});t.onTransition(i=>{i.matches({authentication:{signedOut:"success"}})?r({isSuccess:!0,isError:!1,error:null}):i.matches("authentication.signedOut.failed")&&r({isSuccess:!1,isError:!0,error:i.context.errors.signout||null})})}),gn=(t,e,r,n)=>new Promise(i=>{const{changed:s,context:o}=t.send("SIGNUP_EMAIL_PASSWORD",{email:e,password:r,options:n});if(!s)return i({error:fe,accessToken:o.accessToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:o.user});t.onTransition(a=>{a.matches("registration.incomplete.failed")?i({accessToken:null,error:a.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):a.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?i({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):a.matches({authentication:"signedIn",registration:"complete"})&&i({accessToken:a.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:a.context.user})})});var ga=Object.defineProperty,Ea=Object.defineProperties,wa=Object.getOwnPropertyDescriptors,En=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,wn=(t,e,r)=>e in t?ga(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,je=(t,e)=>{for(var r in e||(e={}))Sa.call(e,r)&&wn(t,r,e[r]);if(En)for(var r of En(e))Ta.call(e,r)&&wn(t,r,e[r]);return t},$e=(t,e)=>Ea(t,wa(e));const ba=()=>typeof window<"u",ot=t=>!t||!t.accessToken.value||!t.refreshToken.value||!t.accessToken.expiresAt||!t.user?null:{accessToken:t.accessToken.value,accessTokenExpiresIn:(t.accessToken.expiresAt.getTime()-Date.now())/1e3,refreshToken:t.refreshToken.value,user:t.user},be=({accessToken:t,isError:e,user:r,error:n})=>e?{session:null,error:n}:r&&t?{session:{accessToken:t,accessTokenExpiresIn:0,refreshToken:"",user:r},error:null}:{session:null,error:null};class Oa{constructor({url:e,autoRefreshToken:r=!0,autoSignIn:n=!0,autoLogin:i,clientStorage:s,clientStorageType:o,clientStorageGetter:a,clientStorageSetter:u,refreshIntervalTime:l,start:f=!0}){var p;this.url=e,this._client=new oa({backendUrl:e,clientUrl:typeof window<"u"&&((p=window.location)==null?void 0:p.origin)||"",autoRefreshToken:r,autoSignIn:typeof i=="boolean"?i:n,start:f,clientStorage:s,clientStorageType:o,clientStorageGetter:a,clientStorageSetter:u,refreshIntervalTime:l})}async signUp({email:e,password:r,options:n}){const i=await this.waitUntilReady();return be(await gn(i,e,r,n))}async signIn(e){const r=await this.waitUntilReady();if("provider"in e){const{provider:i,options:s}=e,o=di(`${this._client.backendUrl}/signin/provider/${i}`,ne(this._client.clientUrl,s));return ba()&&(window.location.href=o),{providerUrl:o,provider:i,session:null,mfa:null,error:null}}if("email"in e&&"password"in e){const i=await ha(r,e.email,e.password);return i.needsEmailVerification?{session:null,mfa:null,error:Jo}:i.needsMfaOtp?{session:null,mfa:i.mfa,error:null}:$e(je({},be(i)),{mfa:null})}if("email"in e&&"securityKey"in e){if(e.securityKey!==!0)throw Error("securityKey must be true");const i=await va(r,e.email);return $e(je({},be(i)),{mfa:null})}if("email"in e){const{email:i,options:s}=e,{error:o}=await mn(r,i,s);return{session:null,mfa:null,error:o}}if("phoneNumber"in e&&"otp"in e){const i=await ma(r,e.phoneNumber,e.otp);return $e(je({},be(i)),{mfa:null})}if("phoneNumber"in e){const{error:i}=await yn(r,e.phoneNumber,e.options);return{error:i,mfa:null,session:null}}if("otp"in e){const i=await pa(r,e.otp,e.ticket);return $e(je({},be(i)),{mfa:null})}const n=await da(r);return $e(je({},be(n)),{mfa:null})}async signOut(e){const r=await this.waitUntilReady(),{error:n}=await ya(r,e==null?void 0:e.all);return{error:n}}async resetPassword({email:e,options:r}){const n=Ae(na(this._client)).start(),{error:i}=await la(n,e,r);return{error:i}}async changePassword({newPassword:e,ticket:r}){const n=Ae(ra(this._client)).start(),{error:i}=await ca(n,e,r);return{error:i}}async sendVerificationEmail({email:e,options:r}){const n=Ae(ia(this._client)).start(),{error:i}=await fa(n,e,r);return{error:i}}async changeEmail({newEmail:e,options:r}){const n=Ae(ta(this._client)).start(),{error:i}=await ua(n,e,r);return{error:i}}async deanonymize(e){const r=await this.waitUntilReady();if(e.signInMethod==="passwordless"){if(e.connection==="email"){const{error:n}=await mn(r,e.email,e.options);return{error:n}}if(e.connection==="sms"){const{error:n}=await yn(r,e.phoneNumber,e.options);return{error:n}}}if(e.signInMethod==="email-password"){const{error:n}=await gn(r,e.email,e.password,e.options);return{error:n}}throw Error("Unknown deanonymization method")}async addSecurityKey(e){const{error:r,key:n}=await aa(this._client,e);return{error:r,key:n}}onTokenChanged(e){const r=n=>n.onTransition(({event:i,context:s})=>{i.type==="TOKEN_CHANGED"&&e(ot(s))});if(this._client.interpreter){const n=r(this._client.interpreter);return()=>n.stop()}else return this._client.onStart(n=>{r(n.interpreter)}),()=>{console.log("onTokenChanged was added before the interpreter started. Cannot unsubscribe listener.")}}onAuthStateChanged(e){const r=n=>n.onTransition(({event:i,context:s})=>{(i.type==="SIGNED_IN"||i.type==="SIGNED_OUT")&&e(i.type,ot(s))});if(this._client.interpreter){const n=r(this._client.interpreter);return()=>n.stop()}else return this._client.onStart(n=>{r(n.interpreter)}),()=>{console.log("onAuthStateChanged was added before the interpreter started. Cannot unsubscribe listener.")}}isAuthenticated(){var e;return!!((e=this._client.interpreter)!=null&&e.state.matches({authentication:"signedIn"}))}async isAuthenticatedAsync(){return(await this.waitUntilReady()).state.matches({authentication:"signedIn"})}getAuthenticationStatus(){return this.isReady()?{isAuthenticated:this.isAuthenticated(),isLoading:!1}:{isAuthenticated:!1,isLoading:!0}}getJWTToken(){return this.getAccessToken()}getAccessToken(){var e,r;return(r=(e=this._client.interpreter)==null?void 0:e.state.context.accessToken.value)!=null?r:void 0}getDecodedAccessToken(){const e=this.getAccessToken();return e?Oi(e):null}getHasuraClaims(){var e;return((e=this.getDecodedAccessToken())==null?void 0:e["https://hasura.io/jwt/claims"])||null}getHasuraClaim(e){var r;return((r=this.getHasuraClaims())==null?void 0:r[e.startsWith("x-hasura-")?e:`x-hasura-${e}`])||null}async refreshSession(e){try{const r=await this.waitUntilReady();return new Promise(n=>{const i=e||r.state.context.refreshToken.value;if(!i)return n({session:null,error:Go});const{changed:s}=r.send("TRY_TOKEN",{token:i});if(!s)return n({session:null,error:zo});r.onTransition(o=>{o.matches({token:{idle:"error"}})?n({session:null,error:Yo}):o.event.type==="TOKEN_CHANGED"&&n({session:ot(o.context),error:null})})})}catch(r){return{session:null,error:r.message}}}getSession(){var e,r;return ot((r=(e=this._client.interpreter)==null?void 0:e.state)==null?void 0:r.context)}getUser(){var e,r,n;return((n=(r=(e=this._client.interpreter)==null?void 0:e.state)==null?void 0:r.context)==null?void 0:n.user)||null}waitUntilReady(){const r=this._client.interpreter;if(!r)throw Error("Auth interpreter not set");return r.state.hasTag("loading")?new Promise((n,i)=>{let s=setTimeout(()=>i(`The state machine is not yet ready after ${15} seconds.`),15e3);r.onTransition(o=>{if(!o.hasTag("loading"))return clearTimeout(s),n(r)})}):Promise.resolve(r)}isReady(){var e,r;return!((r=(e=this._client.interpreter)==null?void 0:e.state)!=null&&r.hasTag("loading"))}get client(){return this._client}}var Aa=typeof self=="object"?self.FormData:window.FormData,_a=Object.defineProperty,xa=Object.defineProperties,Ia=Object.getOwnPropertyDescriptors,Sn=Object.getOwnPropertySymbols,Ra=Object.prototype.hasOwnProperty,Na=Object.prototype.propertyIsEnumerable,Tn=(t,e,r)=>e in t?_a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Be=(t,e)=>{for(var r in e||(e={}))Ra.call(e,r)&&Tn(t,r,e[r]);if(Sn)for(var r of Sn(e))Na.call(e,r)&&Tn(t,r,e[r]);return t},hi=(t,e)=>xa(t,Ia(e));class Pa{constructor({url:e}){this.url=e,this.httpClient=Rt.create({baseURL:this.url})}async upload(e){const{formData:r}=e;try{return{fileMetadata:(await this.httpClient.post("/files",r,{headers:hi(Be(Be({},this.generateUploadHeaders(e)),this.generateAuthHeaders()),{"Content-Type":"multipart/form-data"})})).data,error:null}}catch(n){return{fileMetadata:null,error:n}}}async getPresignedUrl(e){try{const{fileId:r}=e;return{presignedUrl:(await this.httpClient.get(`/files/${r}/presignedurl`,{headers:Be({},this.generateAuthHeaders())})).data,error:null}}catch(r){return{presignedUrl:null,error:r}}}async delete(e){try{const{fileId:r}=e;return await this.httpClient.delete(`/files/${r}`,{headers:Be({},this.generateAuthHeaders())}),{error:null}}catch(r){return{error:r}}}setAccessToken(e){return this.accessToken=e,this}setAdminSecret(e){return this.adminSecret=e,this}generateUploadHeaders(e){const{bucketId:r,name:n,id:i}=e,s={};return r&&(s["x-nhost-bucket-id"]=r),i&&(s["x-nhost-file-id"]=i),n&&(s["x-nhost-file-name"]=n),s}generateAuthHeaders(){return!this.adminSecret&&!this.accessToken?null:this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:{Authorization:`Bearer ${this.accessToken}`}}}class Da{constructor({url:e,adminSecret:r}){this.url=e,this.api=new Pa({url:e}),this.setAdminSecret(r)}async upload(e){let r;"file"in e?(r=new Aa,r.append("file",e.file)):r=e.formData;const{fileMetadata:n,error:i}=await this.api.upload(hi(Be({},e),{formData:r}));return i?{fileMetadata:null,error:i}:n?{fileMetadata:n,error:null}:{fileMetadata:null,error:new Error("Invalid file returned")}}getUrl(e){return this.getPublicUrl(e)}getPublicUrl(e){const{fileId:r}=e;return`${this.url}/files/${r}`}async getPresignedUrl(e){const{presignedUrl:r,error:n}=await this.api.getPresignedUrl(e);return n?{presignedUrl:null,error:n}:r?{presignedUrl:r,error:null}:{presignedUrl:null,error:new Error("Invalid file id")}}async delete(e){const{error:r}=await this.api.delete(e);return r?{error:r}:{error:null}}setAccessToken(e){return this.api.setAccessToken(e),this}setAdminSecret(e){return this.api.setAdminSecret(e),this}}function ka(t,e){if(!Boolean(t))throw new Error(e)}class lu{constructor(e,r,n){this.start=e.start,this.end=r.end,this.startToken=e,this.endToken=r,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class fu{constructor(e,r,n,i,s,o){this.kind=e,this.start=r,this.end=n,this.line=i,this.column=s,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const pi={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Ca=new Set(Object.keys(pi));function bn(t){const e=t==null?void 0:t.kind;return typeof e=="string"&&Ca.has(e)}var On;(function(t){t.QUERY="query",t.MUTATION="mutation",t.SUBSCRIPTION="subscription"})(On||(On={}));var dr;(function(t){t.NAME="Name",t.DOCUMENT="Document",t.OPERATION_DEFINITION="OperationDefinition",t.VARIABLE_DEFINITION="VariableDefinition",t.SELECTION_SET="SelectionSet",t.FIELD="Field",t.ARGUMENT="Argument",t.FRAGMENT_SPREAD="FragmentSpread",t.INLINE_FRAGMENT="InlineFragment",t.FRAGMENT_DEFINITION="FragmentDefinition",t.VARIABLE="Variable",t.INT="IntValue",t.FLOAT="FloatValue",t.STRING="StringValue",t.BOOLEAN="BooleanValue",t.NULL="NullValue",t.ENUM="EnumValue",t.LIST="ListValue",t.OBJECT="ObjectValue",t.OBJECT_FIELD="ObjectField",t.DIRECTIVE="Directive",t.NAMED_TYPE="NamedType",t.LIST_TYPE="ListType",t.NON_NULL_TYPE="NonNullType",t.SCHEMA_DEFINITION="SchemaDefinition",t.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",t.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",t.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",t.FIELD_DEFINITION="FieldDefinition",t.INPUT_VALUE_DEFINITION="InputValueDefinition",t.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",t.UNION_TYPE_DEFINITION="UnionTypeDefinition",t.ENUM_TYPE_DEFINITION="EnumTypeDefinition",t.ENUM_VALUE_DEFINITION="EnumValueDefinition",t.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",t.DIRECTIVE_DEFINITION="DirectiveDefinition",t.SCHEMA_EXTENSION="SchemaExtension",t.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",t.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",t.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",t.UNION_TYPE_EXTENSION="UnionTypeExtension",t.ENUM_TYPE_EXTENSION="EnumTypeExtension",t.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(dr||(dr={}));function hr(t){return t===9||t===32}function Ua(t){return t>=48&&t<=57}function vi(t){return t>=97&&t<=122||t>=65&&t<=90}function du(t){return vi(t)||t===95}function hu(t){return vi(t)||Ua(t)||t===95}function pu(t){var e;let r=Number.MAX_SAFE_INTEGER,n=null,i=-1;for(let o=0;o<t.length;++o){var s;const a=t[o],u=La(a);u!==a.length&&(n=(s=n)!==null&&s!==void 0?s:o,i=o,o!==0&&u<r&&(r=u))}return t.map((o,a)=>a===0?o:o.slice(r)).slice((e=n)!==null&&e!==void 0?e:0,i+1)}function La(t){let e=0;for(;e<t.length&&hr(t.charCodeAt(e));)++e;return e}function ja(t,e){const r=t.replace(/"""/g,'\\"""'),n=r.split(/\r\n|[\n\r]/g),i=n.length===1,s=n.length>1&&n.slice(1).every(d=>d.length===0||hr(d.charCodeAt(0))),o=r.endsWith('\\"""'),a=t.endsWith('"')&&!o,u=t.endsWith("\\"),l=a||u,f=!(e!=null&&e.minimize)&&(!i||t.length>70||l||s||o);let p="";const c=i&&hr(t.charCodeAt(0));return(f&&!c||s)&&(p+=`
`),p+=r,(f||l)&&(p+=`
`),'"""'+p+'"""'}const $a=10,mi=2;function Ma(t){return Dt(t,[])}function Dt(t,e){switch(typeof t){case"string":return JSON.stringify(t);case"function":return t.name?`[function ${t.name}]`:"[function]";case"object":return Fa(t,e);default:return String(t)}}function Fa(t,e){if(t===null)return"null";if(e.includes(t))return"[Circular]";const r=[...e,t];if(Va(t)){const n=t.toJSON();if(n!==t)return typeof n=="string"?n:Dt(n,r)}else if(Array.isArray(t))return Ba(t,r);return qa(t,r)}function Va(t){return typeof t.toJSON=="function"}function qa(t,e){const r=Object.entries(t);if(r.length===0)return"{}";if(e.length>mi)return"["+Ha(t)+"]";const n=r.map(([i,s])=>i+": "+Dt(s,e));return"{ "+n.join(", ")+" }"}function Ba(t,e){if(t.length===0)return"[]";if(e.length>mi)return"[Array]";const r=Math.min($a,t.length),n=t.length-r,i=[];for(let s=0;s<r;++s)i.push(Dt(t[s],e));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function Ha(t){const e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){const r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}function Ga(t){return`"${t.replace(za,Wa)}"`}const za=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function Wa(t){return Ja[t.charCodeAt(0)]}const Ja=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],Ya=Object.freeze({});function Xa(t,e,r=pi){const n=new Map;for(const g of Object.values(dr))n.set(g,Qa(e,g));let i,s=Array.isArray(t),o=[t],a=-1,u=[],l=t,f,p;const c=[],d=[];do{a++;const g=a===o.length,w=g&&u.length!==0;if(g){if(f=d.length===0?void 0:c[c.length-1],l=p,p=d.pop(),w)if(s){l=l.slice();let O=0;for(const[y,k]of u){const A=y-O;k===null?(l.splice(A,1),O++):l[A]=k}}else{l=Object.defineProperties({},Object.getOwnPropertyDescriptors(l));for(const[O,y]of u)l[O]=y}a=i.index,o=i.keys,u=i.edits,s=i.inArray,i=i.prev}else if(p){if(f=s?a:o[a],l=p[f],l==null)continue;c.push(f)}let S;if(!Array.isArray(l)){var h,v;bn(l)||ka(!1,`Invalid AST Node: ${Ma(l)}.`);const O=g?(h=n.get(l.kind))===null||h===void 0?void 0:h.leave:(v=n.get(l.kind))===null||v===void 0?void 0:v.enter;if(S=O==null?void 0:O.call(e,l,f,p,c,d),S===Ya)break;if(S===!1){if(!g){c.pop();continue}}else if(S!==void 0&&(u.push([f,S]),!g))if(bn(S))l=S;else{c.pop();continue}}if(S===void 0&&w&&u.push([f,l]),g)c.pop();else{var m;i={inArray:s,index:a,keys:o,edits:u,prev:i},s=Array.isArray(l),o=s?l:(m=r[l.kind])!==null&&m!==void 0?m:[],a=-1,u=[],p&&d.push(p),p=l}}while(i!==void 0);return u.length!==0?u[u.length-1][1]:t}function Qa(t,e){const r=t[e];return typeof r=="object"?r:typeof r=="function"?{enter:r,leave:void 0}:{enter:t.enter,leave:t.leave}}function yi(t){return Xa(t,Za)}const Ka=80,Za={Name:{leave:t=>t.value},Variable:{leave:t=>"$"+t.name},Document:{leave:t=>T(t.definitions,`

`)},OperationDefinition:{leave(t){const e=_("(",T(t.variableDefinitions,", "),")"),r=T([t.operation,T([t.name,e]),T(t.directives," ")]," ");return(r==="query"?"":r+" ")+t.selectionSet}},VariableDefinition:{leave:({variable:t,type:e,defaultValue:r,directives:n})=>t+": "+e+_(" = ",r)+_(" ",T(n," "))},SelectionSet:{leave:({selections:t})=>Z(t)},Field:{leave({alias:t,name:e,arguments:r,directives:n,selectionSet:i}){const s=_("",t,": ")+e;let o=s+_("(",T(r,", "),")");return o.length>Ka&&(o=s+_(`(
`,vt(T(r,`
`)),`
)`)),T([o,T(n," "),i]," ")}},Argument:{leave:({name:t,value:e})=>t+": "+e},FragmentSpread:{leave:({name:t,directives:e})=>"..."+t+_(" ",T(e," "))},InlineFragment:{leave:({typeCondition:t,directives:e,selectionSet:r})=>T(["...",_("on ",t),T(e," "),r]," ")},FragmentDefinition:{leave:({name:t,typeCondition:e,variableDefinitions:r,directives:n,selectionSet:i})=>`fragment ${t}${_("(",T(r,", "),")")} on ${e} ${_("",T(n," ")," ")}`+i},IntValue:{leave:({value:t})=>t},FloatValue:{leave:({value:t})=>t},StringValue:{leave:({value:t,block:e})=>e?ja(t):Ga(t)},BooleanValue:{leave:({value:t})=>t?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:t})=>t},ListValue:{leave:({values:t})=>"["+T(t,", ")+"]"},ObjectValue:{leave:({fields:t})=>"{"+T(t,", ")+"}"},ObjectField:{leave:({name:t,value:e})=>t+": "+e},Directive:{leave:({name:t,arguments:e})=>"@"+t+_("(",T(e,", "),")")},NamedType:{leave:({name:t})=>t},ListType:{leave:({type:t})=>"["+t+"]"},NonNullType:{leave:({type:t})=>t+"!"},SchemaDefinition:{leave:({description:t,directives:e,operationTypes:r})=>_("",t,`
`)+T(["schema",T(e," "),Z(r)]," ")},OperationTypeDefinition:{leave:({operation:t,type:e})=>t+": "+e},ScalarTypeDefinition:{leave:({description:t,name:e,directives:r})=>_("",t,`
`)+T(["scalar",e,T(r," ")]," ")},ObjectTypeDefinition:{leave:({description:t,name:e,interfaces:r,directives:n,fields:i})=>_("",t,`
`)+T(["type",e,_("implements ",T(r," & ")),T(n," "),Z(i)]," ")},FieldDefinition:{leave:({description:t,name:e,arguments:r,type:n,directives:i})=>_("",t,`
`)+e+(An(r)?_(`(
`,vt(T(r,`
`)),`
)`):_("(",T(r,", "),")"))+": "+n+_(" ",T(i," "))},InputValueDefinition:{leave:({description:t,name:e,type:r,defaultValue:n,directives:i})=>_("",t,`
`)+T([e+": "+r,_("= ",n),T(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:t,name:e,interfaces:r,directives:n,fields:i})=>_("",t,`
`)+T(["interface",e,_("implements ",T(r," & ")),T(n," "),Z(i)]," ")},UnionTypeDefinition:{leave:({description:t,name:e,directives:r,types:n})=>_("",t,`
`)+T(["union",e,T(r," "),_("= ",T(n," | "))]," ")},EnumTypeDefinition:{leave:({description:t,name:e,directives:r,values:n})=>_("",t,`
`)+T(["enum",e,T(r," "),Z(n)]," ")},EnumValueDefinition:{leave:({description:t,name:e,directives:r})=>_("",t,`
`)+T([e,T(r," ")]," ")},InputObjectTypeDefinition:{leave:({description:t,name:e,directives:r,fields:n})=>_("",t,`
`)+T(["input",e,T(r," "),Z(n)]," ")},DirectiveDefinition:{leave:({description:t,name:e,arguments:r,repeatable:n,locations:i})=>_("",t,`
`)+"directive @"+e+(An(r)?_(`(
`,vt(T(r,`
`)),`
)`):_("(",T(r,", "),")"))+(n?" repeatable":"")+" on "+T(i," | ")},SchemaExtension:{leave:({directives:t,operationTypes:e})=>T(["extend schema",T(t," "),Z(e)]," ")},ScalarTypeExtension:{leave:({name:t,directives:e})=>T(["extend scalar",t,T(e," ")]," ")},ObjectTypeExtension:{leave:({name:t,interfaces:e,directives:r,fields:n})=>T(["extend type",t,_("implements ",T(e," & ")),T(r," "),Z(n)]," ")},InterfaceTypeExtension:{leave:({name:t,interfaces:e,directives:r,fields:n})=>T(["extend interface",t,_("implements ",T(e," & ")),T(r," "),Z(n)]," ")},UnionTypeExtension:{leave:({name:t,directives:e,types:r})=>T(["extend union",t,T(e," "),_("= ",T(r," | "))]," ")},EnumTypeExtension:{leave:({name:t,directives:e,values:r})=>T(["extend enum",t,T(e," "),Z(r)]," ")},InputObjectTypeExtension:{leave:({name:t,directives:e,fields:r})=>T(["extend input",t,T(e," "),Z(r)]," ")}};function T(t,e=""){var r;return(r=t==null?void 0:t.filter(n=>n).join(e))!==null&&r!==void 0?r:""}function Z(t){return _(`{
`,vt(T(t,`
`)),`
}`)}function _(t,e,r=""){return e!=null&&e!==""?t+e+r:""}function vt(t){return _("  ",t.replace(/\n/g,`
  `))}function An(t){var e;return(e=t==null?void 0:t.some(r=>r.includes(`
`)))!==null&&e!==void 0?e:!1}const vu=Object.freeze(Object.defineProperty({__proto__:null,print:yi},Symbol.toStringTag,{value:"Module"}));var eu=Object.defineProperty,tu=Object.defineProperties,ru=Object.getOwnPropertyDescriptors,Ot=Object.getOwnPropertySymbols,gi=Object.prototype.hasOwnProperty,Ei=Object.prototype.propertyIsEnumerable,_n=(t,e,r)=>e in t?eu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xe=(t,e)=>{for(var r in e||(e={}))gi.call(e,r)&&_n(t,r,e[r]);if(Ot)for(var r of Ot(e))Ei.call(e,r)&&_n(t,r,e[r]);return t},wi=(t,e)=>tu(t,ru(e)),nu=(t,e)=>{var r={};for(var n in t)gi.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Ot)for(var n of Ot(t))e.indexOf(n)<0&&Ei.call(t,n)&&(r[n]=t[n]);return r};class iu{constructor(e){const{url:r,adminSecret:n}=e;this.accessToken=null,this.adminSecret=n,this.instance=Rt.create({baseURL:r})}async call(e,r,n){const i=xe(xe({},this.generateAccessTokenHeaders()),n==null?void 0:n.headers);let s;try{s=await this.instance.post(e,r,wi(xe({},n),{headers:i}))}catch(o){if(o instanceof Error)return{res:null,error:o}}return s?{res:s,error:null}:{res:null,error:new Error("Unable to make post request to funtion")}}setAccessToken(e){if(!e){this.accessToken=null;return}this.accessToken=e}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}}class su{constructor(e){const{url:r,adminSecret:n}=e;this.url=r,this.accessToken=null,this.adminSecret=n,this.instance=Rt.create({baseURL:r})}async request(e,r,n){const i=xe(xe({},this.generateAccessTokenHeaders()),n==null?void 0:n.headers);try{const s="",a=(await this.instance.post("",{operationName:s||void 0,query:typeof e=="string"?e:yi(e),variables:r},wi(xe({},n),{headers:i}))).data,{data:u}=a;return a.errors?{data:null,error:a.errors}:typeof u!="object"||Array.isArray(u)||u===null?{data:null,error:new Error("incorrect response data from GraphQL server")}:{data:u,error:null}}catch(s){return s instanceof Error?{data:null,error:s}:(console.error(s),{data:null,error:new Error("Unable to get do GraphQL request")})}}getUrl(){return this.url}setAccessToken(e){if(!e){this.accessToken=null;return}this.accessToken=e}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}}const ou=/^localhost(:\d+)*$/g;function at(t,e){const{backendUrl:r,subdomain:n,region:i}=t;if(!r&&!n)throw new Error("Either `backendUrl` or `subdomain` must be set.");if(r)return`${r}/v1/${e}`;if(!n)throw new Error("`subdomain` must be set if `backendUrl` is not set.");const s=n.match(ou);if(s&&s.length>0){const o=s[0];return o==="localhost"?`http://localhost:1337/v1/${e}`:`http://${o}/v1/${e}`}if(!i)throw new Error('`region` must be set when using a `subdomain` other than "localhost".');return`https://${n}.${e}.${i}.nhost.run/v1`}class au{constructor(e){var r=e,{refreshIntervalTime:n,clientStorageGetter:i,clientStorageSetter:s,clientStorage:o,clientStorageType:a,autoRefreshToken:u,autoSignIn:l,adminSecret:f,devTools:p,start:c=!0}=r,d=nu(r,["refreshIntervalTime","clientStorageGetter","clientStorageSetter","clientStorage","clientStorageType","autoRefreshToken","autoSignIn","adminSecret","devTools","start"]),h;this.auth=new Oa({url:at(d,"auth"),refreshIntervalTime:n,clientStorageGetter:i,clientStorageSetter:s,clientStorage:o,clientStorageType:a,autoRefreshToken:u,autoSignIn:l,start:c}),this.storage=new Da({url:at(d,"storage"),adminSecret:f}),this.functions=new iu({url:at(d,"functions"),adminSecret:f}),this.graphql=new su({url:at(d,"graphql"),adminSecret:f}),this.storage.setAccessToken(this.auth.getAccessToken()),this.functions.setAccessToken(this.auth.getAccessToken()),this.graphql.setAccessToken(this.auth.getAccessToken()),(h=this.auth.client)==null||h.onStart(()=>{this.auth.onAuthStateChanged((v,m)=>{v==="SIGNED_OUT"&&(this.storage.setAccessToken(void 0),this.functions.setAccessToken(void 0),this.graphql.setAccessToken(void 0))}),this.auth.onTokenChanged(v=>{this.storage.setAccessToken(v==null?void 0:v.accessToken),this.functions.setAccessToken(v==null?void 0:v.accessToken),this.graphql.setAccessToken(v==null?void 0:v.accessToken)})}),this._adminSecret=f,this.devTools=p}get adminSecret(){return this._adminSecret}set adminSecret(e){this._adminSecret=e,this.storage.setAdminSecret(e)}}const mu=new au({subdomain:"ycygbfkpclkxkcesfrpy",region:"ap-south-1"});export{dr as K,lu as L,On as O,fu as T,du as a,hu as b,ka as c,pu as d,Ma as e,uu as f,cu as g,Ua as i,mu as n,vu as p};
